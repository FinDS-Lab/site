<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Teaching | FINDS Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="FINDS Lab — Teaching with school/topic filters." />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&family=Noto+Sans:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    :root{ --warm-start:#ef4444; --warm-end:#f59e0b; }
    body{font-family:"Noto Sans KR","Noto Sans","Roboto",system-ui,-apple-system,"Segoe UI",Arial,sans-serif;letter-spacing:.01em}
    .sticky-blur{position:sticky;top:0;z-index:50;backdrop-filter:saturate(180%) blur(6px);-webkit-backdrop-filter:saturate(180%) blur(6px)}
    .card-hover{transition:transform .2s ease, box-shadow .2s ease}
    .card-hover:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.08)}
    *{scrollbar-width:thin;scrollbar-color:#f59e0b #f1f5f9}
    *::-webkit-scrollbar{height:8px;width:8px}
    *::-webkit-scrollbar-thumb{background:#f59e0b;border-radius:9999px}
    *::-webkit-scrollbar-track{background:#f1f5f9}
  </style>
</head>
<body class="bg-gradient-to-b from-white to-slate-50 min-h-screen">
  <div id="root"></div>

  <script type="text/babel">
    const {useMemo,useState} = React;

    const WARM_START = getComputedStyle(document.documentElement).getPropertyValue('--warm-start') || '#ef4444';
    const WARM_END   = getComputedStyle(document.documentElement).getPropertyValue('--warm-end')   || '#f59e0b';
    const warmScale  = d3.interpolateLab(WARM_START, WARM_END);
    const readable = (bg)=>{ const c=d3.color(bg)||{r:255,g:255,b:255}; const L=(0.2126*c.r+0.7152*c.g+0.0722*c.b)/255; return L<0.55?'#fff':'#111827'; }
    const pickWarm = (key)=>{ let h=0; const s=String(key||''); for(let i=0;i<s.length;i++) h=(h*31+s.charCodeAt(i))>>>0; return warmScale((h%16)/15); }

    const Tag=({text})=>{ const bg=pickWarm(text); return <span className="px-2 py-0.5 text-[12px] font-semibold rounded-full inline-flex items-center" style={{backgroundColor:bg,color:readable(bg),boxShadow:'inset 0 0 0 1px rgba(0,0,0,.06)'}}>{text}</span> }
    const FilterChip=({text,selected,onClick})=>{ const base=pickWarm(text); const bg=selected?base:d3.interpolateLab(base,'#ffffff')(0.75); const border=d3.interpolateLab(base,'#000')(0.18); return <button onClick={onClick} className="px-3 py-1 text-xs font-semibold rounded-full border transition-colors" style={{backgroundColor:bg,color:readable(bg),borderColor:border}}>{text}</button> }

    const Section = ({title, subtitle, children}) => (
      <section className="max-w-6xl mx-auto px-4">
        <div className="mb-4">
          <h2 className="text-2xl font-bold text-slate-800">{title}</h2>
          {subtitle && <p className="text-sm text-slate-600 mt-1">{subtitle}</p>}
        </div>
        {children}
      </section>
    );

    const courses=[
      { school:"Pusan National University", title:"AI for Financial Time Series", term:"2025-Fall", topics:["Time-Series","Finance","Deep Learning"] },
      { school:"University of Oxford", title:"Quantitative Finance Seminar", term:"2025-Spring", topics:["Finance","Seminar"] },
      { school:"UNIST", title:"Machine Learning", term:"2023-Fall", topics:["ML","Fundamentals"] },
      { school:"UNIST", title:"Optimization for Data Science", term:"2022-Fall", topics:["Optimization","Math"] },
    ];

    const Card=({c})=> (
      <div className="p-5 bg-white rounded-xl border border-slate-200 card-hover">
        <div className="flex flex-wrap items-center gap-2">
          <Tag text={c.school}/>
          <Tag text={c.term}/>
        </div>
        <p className="mt-2 text-lg font-semibold text-slate-900">{c.title}</p>
        <div className="mt-3 flex flex-wrap gap-2">{c.topics.map(t=> <Tag key={t} text={t}/>)}</div>
      </div>
    );

    const TeachingPage=()=>{
      const [schools,setSchools]=useState(new Set());
      const [topics,setTopics]=useState(new Set());
      const allSchools=useMemo(()=>[...new Set(courses.map(c=>c.school))].sort(),[]);
      const allTopics =useMemo(()=>[...new Set(courses.flatMap(c=>c.topics))].sort(),[]);
      const toggle=(setter,v)=> setter(prev=>{const n=new Set(prev); n.has(v)?n.delete(v):n.add(v); return n;});
      const reset=()=>{setSchools(new Set()); setTopics(new Set());}
      const filtered=useMemo(()=> courses.filter(c=>{
        if(schools.size>0 && !schools.has(c.school)) return false;
        if(topics.size>0 && !c.topics.some(t=>topics.has(t))) return false;
        return true;
      }),[schools,topics]);

      return (
        <div className="min-h-screen">
          <div className="sticky-blur bg-white/80 border-b border-slate-200">
            <header className="max-w-6xl mx-auto px-4 py-5 flex items-center justify-between">
              <div>
                <h1 className="text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-800">Teaching</h1>
                <p className="text-sm text-slate-600">학교와 Topic으로 필터링</p>
              </div>
              <a href="./index.html" className="text-sm font-semibold underline decoration-2 underline-offset-4" style={{color:pickWarm('back')}}>Home</a>
            </header>
            <div className="max-w-6xl mx-auto px-4 pb-3">
              <div className="flex items-center gap-3 bg-slate-100/70 p-1 rounded-lg border border-slate-200">
                <div className="text-[12px] font-bold text-slate-600 pl-2">Results</div>
                <div className="text-2xl font-extrabold" style={{color:pickWarm('count')}}>{filtered.length}</div>
                <button onClick={reset} className="ml-auto px-3 py-2 text-xs sm:text-sm font-semibold rounded-md border border-slate-200 bg-white hover:bg-slate-50" style={{color:pickWarm('reset')}}>Reset</button>
              </div>
            </div>
          </div>

          <div className="sticky-blur bg-white/70 border-b border-slate-200">
            <div className="max-w-6xl mx-auto px-4 py-3 space-y-3">
              <div className="flex flex-wrap items-center gap-2">
                <span className="text-xs font-bold text-slate-600">Filter by 학교</span>
                {allSchools.map(s=> <FilterChip key={s} text={s} selected={schools.has(s)} onClick={()=>toggle(setSchools,s)} />)}
              </div>
              <div className="flex flex-wrap items-center gap-2">
                <span className="text-xs font-bold text-slate-600">Filter by Topic</span>
                {allTopics.map(t=> <FilterChip key={t} text={t} selected={topics.has(t)} onClick={()=>toggle(setTopics,t)} />)}
              </div>
            </div>
          </div>

          <main className="py-6">
            <Section title="Courses" subtitle="필터를 사용해 원하는 수업만 보세요.">
              <div className="grid gap-4 sm:grid-cols-2">{filtered.map((c,i)=> <Card key={i} c={c}/>)}</div>
            </Section>
          </main>

          <footer className="max-w-6xl mx-auto px-4 py-10 text-center text-xs text-slate-500">© {new Date().getFullYear()} FINDS Lab. Teaching</footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<TeachingPage/>);
  </script>
</body>
</html>
