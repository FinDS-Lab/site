<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Publications | FINDS Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="FINDS Lab — Publications with rich filters." />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&family=Noto+Sans:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    :root{
      --warm-start:#ef4444; /* red-500 */
      --warm-end:#f59e0b;   /* amber-500 */
    }
    body{font-family:"Noto Sans KR","Noto Sans","Roboto",system-ui,-apple-system,"Segoe UI",Arial,sans-serif;letter-spacing:.01em}
    .sticky-blur{position:sticky;top:0;z-index:50;backdrop-filter:saturate(180%) blur(6px);-webkit-backdrop-filter:saturate(180%) blur(6px)}
    .card-hover{transition:transform .2s ease, box-shadow .2s ease}
    .card-hover:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.08)}
    *{scrollbar-width:thin;scrollbar-color:#f59e0b #f1f5f9}
    *::-webkit-scrollbar{height:8px;width:8px}
    *::-webkit-scrollbar-thumb{background:#f59e0b;border-radius:9999px}
    *::-webkit-scrollbar-track{background:#f1f5f9}
  </style>
</head>
<body class="bg-gradient-to-b from-white to-slate-50 min-h-screen">
  <div id="root"></div>

  <script type="text/babel">
    const {useState,useMemo,useEffect} = React;

    // ---------- palette helpers ----------
    const WARM_START = getComputedStyle(document.documentElement).getPropertyValue('--warm-start') || '#ef4444';
    const WARM_END   = getComputedStyle(document.documentElement).getPropertyValue('--warm-end')   || '#f59e0b';
    const warmScale  = d3.interpolateLab(WARM_START, WARM_END);

    const readable = (bg)=>{
      const c = d3.color(bg) || {r:255,g:255,b:255};
      const L = (0.2126*c.r + 0.7152*c.g + 0.0722*c.b)/255;
      return L < 0.55 ? '#ffffff' : '#111827';
    }

    const pickWarm = (key)=>{
      let h=0; const s=String(key||'');
      for(let i=0;i<s.length;i++) h=(h*31+s.charCodeAt(i))>>>0;
      const t=(h%16)/15; return warmScale(t);
    }

    // High/Low tier tag style (요구사항: 높은급=빨간/흰, 낮은급=골드/검)
    const tierTagStyle = (tier)=> tier==='high'
      ? { backgroundColor: WARM_START, color:'#fff' }
      : { backgroundColor: WARM_END,   color:'#111827' };

    const journalTier = (t)=> ['SSCI','SCIE','A&HCI'].includes(t) ? 'high' : 'low';
    const confTier    = (t)=> t==='International' ? 'high' : 'low';

    // ---------- UI atoms ----------
    const Tag = ({text, title, colorKey})=>{
      const bg = pickWarm(colorKey||text);
      return <span className="px-2 py-0.5 text-[12px] font-semibold rounded-full inline-flex items-center"
                   style={{backgroundColor:bg, color:readable(bg), boxShadow:'inset 0 0 0 1px rgba(0,0,0,.06)'}}
                   title={title||text}>{text}</span>
    }

    const TierTag = ({text, tier})=> (
      <span className="px-2 py-0.5 text-[12px] font-semibold rounded-full inline-flex items-center"
            style={{...tierTagStyle(tier), boxShadow:'inset 0 0 0 1px rgba(0,0,0,.06)'}}>{text}</span>
    );

    const FilterChip = ({text, selected, onClick})=>{
      const base = pickWarm(text);
      const bg = selected ? base : d3.interpolateLab(base,'#ffffff')(0.75);
      const border = d3.interpolateLab(base,'#000')(0.18);
      return (
        <button onClick={onClick}
          className="px-3 py-1 text-xs font-semibold rounded-full border transition-colors"
          style={{backgroundColor:bg,color:readable(bg),borderColor:border}}>{text}</button>
      )
    }

    const Segmented = ({value,onChange,options}) => (
      <div className="inline-flex rounded-lg border border-slate-200 bg-white shadow-sm overflow-hidden">
        {options.map((opt,i)=>{
          const active = value===opt.value; const base = pickWarm(opt.label);
          const bg = active ? base : 'transparent'; const fg = active? readable(bg) : '#334155';
          return (
            <button key={opt.value} onClick={()=>onChange(opt.value)}
              className={`px-3 sm:px-4 py-2 text-xs sm:text-sm font-semibold ${i>0?'border-l border-slate-200':''}`}
              style={{backgroundColor:bg,color:fg}}>{opt.label}</button>
          )
        })}
      </div>
    );

    // ---------- Data ----------
    const publications = [
      { id:"[C4]", title:"Time-MQA: Time Series Multi-Task QA with Context Enhancement",
        venue:"ACL", year:2025, type:"conference", confType:"International", journalRegion:null, journalType:null,
        topics:["Time-Series","Deep Learning","NLP"], authors:["Yaxuan Kong*","Yiyuan Yang*","Yoontae Hwang","Wenjie Du","Stefan Zohren","Zhangyang Wang","Ming Jin","Qingsong Wen"],
        links:[{text:"paper", href:"https://arxiv.org/abs/2503.01875"}]
      },
      { id:"[C3]", title:"Geodesic Flow Kernels for Semi-Supervised Learning on Mixed-Variable Tabular Dataset",
        venue:"AAAI", year:2025, type:"conference", confType:"International", journalRegion:null, journalType:null,
        topics:["Tabular","Deep Learning"], authors:["Yoontae Hwang","Yongjae Lee"],
        links:[{text:"paper",href:"https://arxiv.org/abs/2412.12864"}]
      },
      { id:"[C2]", title:"CAFO: Feature-Centric Explanation on Time Series Classification",
        venue:"KDD", year:2024, type:"conference", confType:"International",
        topics:["Time-Series","Explainability","Deep Learning"], authors:["Jaeho Kim","Seok-ju Hahn","Yoontae Hwang","Junghye Lee","Seulki Lee"],
        links:[{text:"paper",href:"https://arxiv.org/abs/2406.01833"}]
      },
      { id:"[C1]", title:"SimStock: Representation Model for Stock Similarities",
        venue:"ICAIF", year:2023, type:"conference", confType:"International",
        topics:["Trading","Deep Learning"], authors:["Yoontae Hwang","Junhyeong Lee","Daham Kim","Seunghwan Noh","Joohwan Hong","Yongjae Lee"],
        links:[{text:"paper",href:"https://dl.acm.org/doi/10.1145/3604237.3626888"}]
      },
      { id:"[J5]", title:"Heterogeneous Trading Behaviors of Individual Investors",
        venue:"Finance Research Letters", year:2023, type:"journal", journalRegion:"international", journalType:"SSCI",
        topics:["Trading","Behavior"], authors:["Yoontae Hwang","Junpyo Park","Jang Ho Kim","Yongjae Lee","Frank J Fabozzi"],
        links:[{text:"paper",href:"https://www.sciencedirect.com/science/article/abs/pii/S1544612324005117"}]
      },
      { id:"[J4]", title:"Identifying Household Finance Heterogeneity via Deep Clustering",
        venue:"Annals of Operations Research", year:2023, type:"journal", journalRegion:"international", journalType:"SCIE",
        topics:["Household Finance","Deep Learning"], authors:["Yoontae Hwang","Yongjae Lee","Frank J Fabozzi"],
        links:[{text:"paper",href:"https://link.springer.com/article/10.1007/s10479-022-04900-3"}]
      },
      { id:"[J3]", title:"Household Financial Health: ML for Diagnosis and Prescription",
        venue:"Quantitative Finance", year:2023, type:"journal", journalRegion:"international", journalType:"SSCI",
        topics:["Household Finance","ML"], authors:["Kyeongbin Kim*","Yoontae Hwang*","Dongcheol Lim","Suhyeon Kim","Junghye Lee","Yongjae Lee"],
        links:[{text:"paper",href:"https://www.tandfonline.com/doi/full/10.1080/14697688.2023.2254335"}]
      },
      { id:"[J2]", title:"Stop-loss Adjusted Labels for ML-based Trading of Risky Assets",
        venue:"Finance Research Letters", year:2023, type:"journal", journalRegion:"international", journalType:"SSCI",
        topics:["Trading","Deep Learning"], authors:["Yoontae Hwang","Junpyo Park","Dong-Young Lim","Yongjae Lee"],
        links:[{text:"paper",href:"https://www.sciencedirect.com/science/article/abs/pii/S1544612323006578"}]
      },
      { id:"[J1]", title:"Estimation of Apartment Price Index: ML Focus",
        venue:"Journal of Money & Finance (KMFA)", year:2019, type:"journal", journalRegion:"domestic", journalType:"KCI Accredited",
        topics:["Time-Series","Household Finance"], authors:["Yoontae Hwang"],
        links:[{text:"paper",href:"https://kiss.kstudy.com/Detail/Ar?key=3707638"}]
      },
      { id:"[W]", title:"Decision-informed Neural Networks with LLM Integration for Portfolio Optimization",
        venue:"arXiv", year:2025, type:"preprint", journalRegion:null, journalType:"Other",
        topics:["Portfolio","Deep Learning"], authors:["Yoontae Hwang","Yaxuan Kong","Stefan Zohren","Yongjae Lee"],
        links:[{text:"paper",href:"https://arxiv.org/abs/2502.00828"}]
      },
    ];

    // ---------- components ----------
    const PubItem = ({p}) => {
      const isJournal = p.type==='journal';
      const isConf    = p.type==='conference';
      const isPrep    = p.type==='preprint';
      return (
        <li className="p-5 bg-white rounded-xl border border-slate-200 card-hover">
          <div className="flex flex-wrap items-center gap-2">
            <span className="text-sm font-bold text-slate-600">{p.id}</span>
            {isJournal && <Tag text="Journal"/>}
            {isConf && <Tag text="Conference"/>}
            {isPrep && <Tag text="Preprint"/>}
            {isJournal && p.journalType && <TierTag text={p.journalType} tier={journalTier(p.journalType)} />}
            {isConf && p.confType && <TierTag text={p.confType} tier={confTier(p.confType)} />}
            {isJournal && p.journalRegion && (
              <Tag text={p.journalRegion==='international' ? 'International Journal' : 'Domestic Journal'} />
            )}
          </div>
          <p className="mt-2 text-lg font-semibold text-slate-900">{p.title}</p>
          <p className="text-sm text-slate-600">{p.venue} · {p.year}</p>
          <p className="mt-2 text-[13px] text-slate-700">{p.authors.join(', ')}</p>
          <div className="mt-3 flex flex-wrap gap-2">{p.topics.map(t=> <Tag key={t} text={t} /> )}</div>
          {p.links?.length>0 && (
            <div className="mt-3 flex flex-wrap gap-3">
              {p.links.map((l,i)=> (
                <a key={i} href={l.href} target="_blank" rel="noopener noreferrer"
                   className="text-sm font-semibold underline decoration-2 underline-offset-2"
                   style={{color:pickWarm('link')}}>[{l.text}]</a>
              ))}
            </div>
          )}
        </li>
      )
    }

    const StickyFilterBar = ({children}) => (
      <div className="sticky-blur bg-white/80 border-b border-slate-200">
        <div className="max-w-6xl mx-auto px-4 py-3">{children}</div>
      </div>
    );

    const Section = ({title, subtitle, children}) => (
      <section className="max-w-6xl mx-auto px-4">
        <div className="mb-4">
          <h2 className="text-2xl font-bold text-slate-800">{title}</h2>
          {subtitle && <p className="text-sm text-slate-600 mt-1">{subtitle}</p>}
        </div>
        {children}
      </section>
    );

    // ---------- page ----------
    const PublicationsPage = () => {
      const categoryOptions = [
        {value:'all', label:'All Papers', hash:'#all'},
        {value:'intl',label:'International Journal Papers', hash:'#international-journal'},
        {value:'dom', label:'Domestic Journal Papers',      hash:'#domestic-journal'},
        {value:'conf',label:'Conference Papers',            hash:'#conference'},
      ];

      // init from hash
      const hashToVal = (h)=>{
        const found = categoryOptions.find(o=>o.hash===h);
        return found? found.value : 'all';
      }
      const [cat,setCat] = useState(hashToVal(window.location.hash));
      useEffect(()=>{
        const onHash = ()=> setCat(hashToVal(window.location.hash));
        window.addEventListener('hashchange', onHash);
        return ()=> window.removeEventListener('hashchange', onHash);
      },[]);
      useEffect(()=>{
        const opt = categoryOptions.find(o=>o.value===cat);
        if(opt) window.location.hash = opt.hash;
      },[cat]);

      // filters
      const [topics, setTopics] = useState(new Set());
      const [venues, setVenues] = useState(new Set());
      const [jTypes, setJTypes] = useState(new Set());
      const [cTypes, setCTypes] = useState(new Set());

      const allTopics = useMemo(()=> [...new Set(publications.flatMap(p=>p.topics))].sort(), []);
      const allVenues = useMemo(()=>{
        const list = publications
          .filter(p=>{
            if (cat==='intl') return p.type==='journal' && p.journalRegion==='international';
            if (cat==='dom')  return p.type==='journal' && p.journalRegion==='domestic';
            if (cat==='conf') return p.type==='conference';
            return true;
          })
          .map(p=>p.venue);
        return [...new Set(list)].sort();
      }, [cat]);

      const allJournalTypes = ["SSCI","SCIE","A&HCI","Scopus","Other","KCI Excellent Accredited","KCI Accredited"];
      const allConfTypes    = ["International","International - Domestic Joint","Domestic"];

      const toggle = (setter,val)=> setter(prev=>{ const n=new Set(prev); n.has(val)?n.delete(val):n.add(val); return n; });
      const reset = ()=>{ setTopics(new Set()); setVenues(new Set()); setJTypes(new Set()); setCTypes(new Set()); }

      const filtered = useMemo(()=>{
        return publications.filter(p=>{
          if (cat==='intl' && !(p.type==='journal' && p.journalRegion==='international')) return false;
          if (cat==='dom'  && !(p.type==='journal' && p.journalRegion==='domestic')) return false;
          if (cat==='conf' && !(p.type==='conference')) return false;
          if (topics.size>0 && !p.topics.some(t=>topics.has(t))) return false;
          if (venues.size>0 && !venues.has(p.venue)) return false;
          if (p.type==='journal' && jTypes.size>0 && p.journalType && !jTypes.has(p.journalType)) return false;
          if (p.type==='journal' && jTypes.size>0 && !p.journalType) return false;
          if (p.type==='conference' && cTypes.size>0 && p.confType && !cTypes.has(p.confType)) return false;
          if (p.type==='conference' && cTypes.size>0 && !p.confType) return false;
          return true;
        }).sort((a,b)=> b.year - a.year );
      }, [cat,topics,venues,jTypes,cTypes]);

      // counts for big number
      const countAll = publications.length;
      const countIntl = publications.filter(p=>p.type==='journal' && p.journalRegion==='international').length;
      const countDom  = publications.filter(p=>p.type==='journal' && p.journalRegion==='domestic').length;
      const countConf = publications.filter(p=>p.type==='conference').length;
      const countMap = { all:countAll, intl:countIntl, dom:countDom, conf:countConf };

      return (
        <div className="min-h-screen">
          {/* Header */}
          <div className="sticky-blur bg-white/80 border-b border-slate-200">
            <header className="max-w-6xl mx-auto px-4 py-5 flex items-center justify-between">
              <div>
                <h1 className="text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-800">Publications</h1>
                <p className="text-sm text-slate-600">All Papers / International / Domestic / Conference — 페이지 분할 없이 필터로 이동</p>
              </div>
              <a href="./index.html" className="text-sm font-semibold underline decoration-2 underline-offset-4" style={{color:pickWarm('back')}}>Home</a>
            </header>
            <nav className="max-w-6xl mx-auto px-4 pb-3">
              <div className="flex flex-wrap items-center gap-2 bg-slate-100/70 p-1 rounded-lg border border-slate-200">
                <Segmented value={cat} onChange={setCat} options={[
                  {value:'all', label:'All Papers'},
                  {value:'intl',label:'International Journal Papers'},
                  {value:'dom', label:'Domestic Journal Papers'},
                  {value:'conf',label:'Conference Papers'}
                ]} />
                <div className="ml-auto pr-2 flex items-center gap-3">
                  <div className="text-[12px] font-bold text-slate-600">Results</div>
                  <div className="text-2xl font-extrabold" style={{color:pickWarm('count')}}>{countMap[cat]}</div>
                </div>
              </div>
            </nav>
          </div>

          {/* Filters */}
          <div className="sticky-blur bg-white/70 border-b border-slate-200">
            <div className="max-w-6xl mx-auto px-4 py-3 space-y-3">
              <div className="flex flex-wrap items-center justify-between gap-3">
                <h3 className="text-sm font-bold text-slate-700">Filters</h3>
                <button onClick={reset}
                        className="px-3 py-2 text-xs sm:text-sm font-semibold rounded-md border border-slate-200 bg-white hover:bg-slate-50"
                        style={{color:pickWarm('reset')}}>Reset</button>
              </div>
              <div className="flex flex-wrap items-center gap-2">
                <span className="text-xs font-bold text-slate-600">Filter by Journal / Conference</span>
                {useMemo(()=>{
                  const vs = [...new Set(publications
                    .filter(p=>{
                      if (cat==='intl') return p.type==='journal' && p.journalRegion==='international';
                      if (cat==='dom')  return p.type==='journal' && p.journalRegion==='domestic';
                      if (cat==='conf') return p.type==='conference';
                      return true;})
                    .map(p=>p.venue))].sort();
                  return vs;
                }, [cat]).map(v=> (
                  <FilterChip key={v} text={v} selected={venues.has(v)} onClick={()=>toggle(setVenues,v)} />
                ))}
              </div>
              <div className="flex flex-wrap items-center gap-2">
                <span className="text-xs font-bold text-slate-600">Filter by Journal Type</span>
                {allJournalTypes.map(j => (
                  <FilterChip key={j} text={j} selected={jTypes.has(j)} onClick={()=>toggle(setJTypes,j)} />
                ))}
              </div>
              <div className="flex flex-wrap items-center gap-2">
                <span className="text-xs font-bold text-slate-600">Filter by Conference Type</span>
                {allConfTypes.map(c => (
                  <FilterChip key={c} text={c} selected={cTypes.has(c)} onClick={()=>toggle(setCTypes,c)} />
                ))}
              </div>
            </div>
          </div>

          {/* List */}
          <main className="py-6">
            <Section title="Papers" subtitle="필터를 조합해서 원하는 결과만 보세요.">
              <ul className="grid gap-4 sm:gap-5">{filtered.map(p=> <PubItem key={p.id+p.title} p={p} />)}</ul>
            </Section>
          </main>

          <footer className="max-w-6xl mx-auto px-4 py-10 text-center text-xs text-slate-500">© {new Date().getFullYear()} FINDS Lab. Publications</footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<PublicationsPage/>);
  </script>
</body>
</html>
