---
layout: default
title: publications
permalink: /publications.html
---

<!-- ===== Gold Interactive Banner (Hearts/Clubs/Spades/Diamonds) ===== -->
<section class="max-w-7xl mx-auto px-4 mt-6">
  <style>
    :root {
      --gold: rgb(214, 177, 77);
      --gold-mid: rgb(234, 197, 97);
      --gold-dark: rgb(194, 157, 57);
    }

    /* Banner */
    .banner-section {
      background: linear-gradient(
        135deg,
        var(--gold) 0%,
        var(--gold-mid) 25%,
        var(--gold-dark) 50%,
        var(--gold) 75%,
        var(--gold-mid) 100%
      );
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      position: relative;
      overflow: hidden;
      min-height: 200px;
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      cursor: pointer;
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Burst container */
    .network-burst {
      position: absolute;
      width: 200px;
      height: 200px;
      pointer-events: none;
      opacity: 0;
      animation: burstAnimation 2s ease-out forwards;
    }
    @keyframes burstAnimation {
      0%   { opacity: 0; transform: scale(.3) rotate(0deg); }
      30%  { opacity: .85; }
      100% { opacity: 0; transform: scale(2) rotate(180deg); }
    }
    .network-burst svg { width: 100%; height: 100%; }
    .burst-line { stroke: rgba(255,255,255,.8); stroke-width: 1.5; fill: none; }
    .burst-dot  { fill: rgba(255,255,255,.95); }

    /* Banner content (left-bottom) */
    .banner-content {
      position: relative;
      z-index: 10;
      padding: 32px 24px;
      display: flex;
      align-items: flex-end;
      justify-content: flex-start;
      min-height: 200px;
    }
    .breadcrumbs-banner {
      display: flex; flex-wrap: wrap; gap: .5rem; align-items: center;
      font-size: 13px; font-weight: 600; margin-bottom: 8px;
    }
    .breadcrumbs-banner a { color: rgba(255,255,255,.92); text-decoration: none; transition: color .2s; }
    .breadcrumbs-banner a:hover { color: #fff; text-decoration: underline; }
    .breadcrumbs-banner .sep { color: rgba(255,255,255,.8); }
    .breadcrumbs-banner span:not(.sep):not(a) { color: #fff; font-weight: 800; }

    .banner-title {
      font-size: 2.25rem;
      font-weight: 900;
      color: #fff;
      text-shadow: 0 2px 4px rgba(0,0,0,.12);
      letter-spacing: -.02em;
      margin: 0;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .banner-content { padding: 24px 18px; min-height: 160px; }
      .banner-section { min-height: 160px; }
      .banner-title { font-size: 1.9rem; }
      .breadcrumbs-banner { font-size: 12px; }
    }
    @media (max-width: 480px) {
      .banner-content { padding: 20px 16px; min-height: 130px; }
      .banner-section { min-height: 130px; }
      .banner-title { font-size: 1.6rem; }
      .breadcrumbs-banner { font-size: 11px; }
    }
  </style>

  <div class="banner-section" onclick="createNetworkBurst(event, this)">
    <div class="banner-content">
      <div>
        <nav aria-label="Breadcrumb" class="breadcrumbs-banner" onclick="event.stopPropagation()">
          <a href="{{ '/' | relative_url }}">Home</a>
          <span class="sep">›</span>
          <span aria-current="page">Publications</span>
        </nav>
        <h1 class="banner-title">Publications</h1>
      </div>
    </div>
  </div>
</section>

<script>
/* Interactive gold burst (cards suits) */
function createNetworkBurst(event, element) {
  const rect = element.getBoundingClientRect();
  const x = event.clientX - rect.left - 100;
  const y = event.clientY - rect.top  - 100;

  const networkDiv = document.createElement('div');
  networkDiv.className = 'network-burst';
  networkDiv.style.left = x + 'px';
  networkDiv.style.top  = y + 'px';

  const patterns = [generateHeartNetwork, generateClubNetwork, generateSpadeNetwork, generateDiamondNetwork];
  const randomPattern = patterns[Math.floor(Math.random() * patterns.length)];
  networkDiv.innerHTML = randomPattern();

  element.appendChild(networkDiv);
  setTimeout(()=> element.removeChild(networkDiv), 2000);
}

/* Heart */
function generateHeartNetwork() {
  let svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">';
  const heartPath = 'M100,140 C80,120 40,100 40,70 C40,50 55,35 70,35 C85,35 95,45 100,55 C105,45 115,35 130,35 C145,35 160,50 160,70 C160,100 120,120 100,140 Z';
  svg += `<path d="${heartPath}" class="burst-line" stroke-width="2"/>`;
  const nodes = [
    {x:70,y:35},{x:130,y:35},
    {x:40,y:70},{x:160,y:70},
    {x:100,y:140},{x:60,y:50},{x:140,y:50},{x:80,y:90},{x:120,y:90}
  ];
  const connections = [[0,1],[0,2],[1,3],[2,4],[3,4],[0,5],[1,6],[5,7],[6,8],[7,8]];
  connections.forEach(([f,t])=> svg += `<line x1="${nodes[f].x}" y1="${nodes[f].y}" x2="${nodes[t].x}" y2="${nodes[t].y}" class="burst-line" opacity=".5"/>`);
  nodes.forEach(n=> svg += `<circle cx="${n.x}" cy="${n.y}" r="${3 + Math.random()*2}" class="burst-dot"/>`);
  svg += '</svg>'; return svg;
}
/* Club */
function generateClubNetwork() {
  let svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">';
  const circles = [{x:100,y:60,r:25},{x:75,y:85,r:25},{x:125,y:85,r:25}];
  circles.forEach(c=> svg += `<circle cx="${c.x}" cy="${c.y}" r="${c.r}" class="burst-line" stroke-width="2"/>`);
  svg += `<line x1="100" y1="100" x2="100" y2="140" class="burst-line" stroke-width="3"/>`;
  const nodes=[];
  circles.forEach(c=>{
    for(let i=0;i<6;i++){ const a=i*2*Math.PI/6; nodes.push({x:c.x+c.r*Math.cos(a),y:c.y+c.r*Math.sin(a)}); }
  });
  nodes.push({x:100,y:100},{x:100,y:140});
  for(let i=0;i<nodes.length;i++){
    for(let j=i+1;j<nodes.length;j++){
      const dx=nodes[i].x-nodes[j].x, dy=nodes[i].y-nodes[j].y, d=Math.hypot(dx,dy);
      if(d<40){ svg += `<line x1="${nodes[i].x}" y1="${nodes[i].y}" x2="${nodes[j].x}" y2="${nodes[j].y}" class="burst-line" opacity="${0.3+(1-d/40)*0.4}"/>`; }
    }
  }
  nodes.forEach(n=> svg += `<circle cx="${n.x}" cy="${n.y}" r="${2 + Math.random()*2}" class="burst-dot"/>`);
  svg += '</svg>'; return svg;
}
/* Spade */
function generateSpadeNetwork() {
  let svg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">';
  const spadePath='M100,50 C80,50 60,65 60,85 C60,105 75,110 85,110 C90,110 95,108 100,105 C105,108 110,110 115,110 C125,110 140,105 140,85 C140,65 120,50 100,50 Z';
  svg += `<path d="${spadePath}" class="burst-line" stroke-width="2"/>`;
  svg += `<path d="M100,105 L90,130 L110,130 Z" class="burst-line" stroke-width="2"/>`;
  svg += `<line x1="100" y1="130" x2="100" y2="145" class="burst-line" stroke-width="3"/>`;
  const nodes=[{x:100,y:50},{x:75,y:70},{x:125,y:70},{x:60,y:85},{x:140,y:85},{x:85,y:110},{x:115,y:110},{x:100,y:105},{x:90,y:130},{x:110,y:130},{x:100,y:145}];
  const conn=[[0,1],[0,2],[1,3],[2,4],[3,5],[4,6],[5,7],[6,7],[7,8],[7,9],[8,10],[9,10]];
  conn.forEach(([f,t])=> svg += `<line x1="${nodes[f].x}" y1="${nodes[f].y}" x2="${nodes[t].x}" y2="${nodes[t].y}" class="burst-line" opacity=".4"/>`);
  nodes.forEach((n,i)=> svg += `<circle cx="${n.x}" cy="${n.y}" r="${(i===0||i===7)?4:3}" class="burst-dot"/>`);
  svg += '</svg>'; return svg;
}
/* Diamond */
function generateDiamondNetwork() {
  let svg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">';
  const diamond='M100,40 L140,100 L100,160 L60,100 Z';
  svg += `<path d="${diamond}" class="burst-line" stroke-width="2"/>`;
  svg += `<line x1="100" y1="40" x2="100" y2="160" class="burst-line" opacity=".55"/>`;
  svg += `<line x1="60" y1="100" x2="140" y2="100" class="burst-line" opacity=".55"/>`;
  svg += `<line x1="80" y1="70" x2="120" y2="130" class="burst-line" opacity=".3"/>`;
  svg += `<line x1="120" y1="70" x2="80" y2="130" class="burst-line" opacity=".3"/>`;
  const nodes=[{x:100,y:40},{x:140,y:100},{x:100,y:160},{x:60,y:100},{x:100,y:100},{x:80,y:70},{x:120,y:70},{x:80,y:130},{x:120,y:130},{x:120,y:100},{x:80,y:100}];
  for(let i=0;i<4;i++){ svg += `<line x1="${nodes[i].x}" y1="${nodes[i].y}" x2="${nodes[4].x}" y2="${nodes[4].y}" class="burst-line" opacity=".32"/>`; }
  nodes.forEach((n,i)=> svg += `<circle cx="${n.x}" cy="${n.y}" r="${i<4?4:(i===4?5:2.5)}" class="burst-dot" opacity="${i===4?1:.85}"/>`);
  for(let i=0;i<4;i++){ const a=i*Math.PI/2; const x=100+30*Math.cos(a), y=100+30*Math.sin(a); svg += `<circle cx="${x}" cy="${y}" r="1.5" class="burst-dot" opacity=".65"/>`; }
  svg += '</svg>'; return svg;
}
</script>

<!-- ===== Styles ===== -->
<style>
  :root{
    --journal-gold: rgb(214, 177, 77);
    --conference-red: rgb(172, 14, 14);
    --joint-orange: 217,119,6;
    --book-pink: rgb(220, 38, 38);
    --report-pink: rgb(251, 113, 133);
  }

  /* Authorship Legend Section */
  .authorship-legend {
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 1rem;
    padding: 20px;
    margin: 20px 0;
  }
  
  .authorship-title {
    font-size: 14px;
    font-weight: 800;
    color: #111827;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 2px solid #f3f4f6;
  }
  
  .authorship-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 12px;
  }
  
  .authorship-item {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    background: #f8fafc;
    border-radius: 0.5rem;
    transition: all 0.2s;
  }
  
  .authorship-item:hover {
    background: #f3f4f6;
    transform: translateX(2px);
  }
  
  .authorship-mark {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 28px;
    height: 28px;
    padding: 0 8px;
    background: #f3f4f6;
    border: 1px solid #e5e7eb;
    color: #374151;
    font-weight: 900;
    font-size: 12px;
    border-radius: 6px;
    margin-right: 12px;
    flex-shrink: 0;
  }
  
  .authorship-mark.asterisk {
    font-size: 16px;
    padding-bottom: 2px;
  }
  
  .authorship-desc {
    display: flex;
    flex-direction: column;
    gap: 2px;
    word-break: keep-all;
    overflow-wrap: anywhere;
  }
  
  .authorship-en {
    font-size: 12px;
    font-weight: 700;
    color: #111827;
    line-height: 1.3;
  }
  
  .authorship-ko {
    font-size: 11px;
    font-weight: 600;
    color: #6b7280;
    line-height: 1.3;
  }

  /* Toolbar */
  .toolbar{
    display:flex;flex-direction:column;gap:14px;
    background:#f8fafc;border:1px solid #e5e7eb;border-radius:1rem;padding:16px;margin-top:20px;
  }
  .search-container{display:flex;align-items:center;gap:12px;flex-wrap:wrap;}
  .search{flex:1;min-width:0;}
  .search input{width:100%;border:1px solid #e5e7eb;border-radius:.6rem;padding:.6rem .8rem;font-size:14px;box-sizing:border-box;}
  .count{font-size:13px;color:#6b7280;font-weight:600;background:#fff;padding:.4rem .8rem;border:1px solid #e5e7eb;border-radius:.5rem;white-space:nowrap;}

  .filter-section{margin-top:8px;}
  .filter-label{font-size:12px;font-weight:700;color:#6b7280;text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px;display:block;}
  .chips{display:flex;flex-wrap:wrap;gap:8px;}
  .chip{
    display:inline-flex;align-items:center;padding:.5rem 1rem;border-radius:999px;border:1px solid transparent;background:#fff;
    font-weight:700;font-size:12px;cursor:pointer;transition:all .2s;white-space:nowrap;
    word-break: keep-all;
  }
  .chip:hover{transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.1);}
  .chip.is-on{box-shadow:inset 0 0 0 2px #111827;}
  .chip:focus-visible{outline:2px solid #111827;outline-offset:2px;}
  .chip-journal.is-on{background:var(--journal-gold);color:#111;}
  .chip-conference.is-on{background:var(--conference-red);color:#fff;}
  .chip-book.is-on{background:var(--book-pink);color:#fff;}
  .chip-report.is-on{background:var(--report-pink);color:#fff;}

  /* Year sections */
  .year-section{background:#fff;border:1px solid #e5e7eb;border-radius:1rem;overflow:hidden;margin-bottom:16px;}
  .year-head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#f8fafc;border-bottom:1px solid #e5e7eb;}
  .year-title{font-size:18px;font-weight:900;color:#111827;}
  .year-toggle{padding:.4rem .8rem;border:1px solid #e5e7eb;border-radius:.6rem;background:#fff;font-weight:700;font-size:12px;cursor:pointer;transition:all .2s;}
  .year-toggle:hover{background:#f8fafc;}
  .year-content{padding:16px;}
  .paper-list{display:grid;gap:14px;}

  /* Paper Card */
  .paper-card{background:#fff;border:1px solid #e5e7eb;border-radius:1rem;overflow:hidden;}
  .paper-row{display:grid;grid-template-columns:56px 1fr;}
  .paper-left{
    display:flex;align-items:center;justify-content:center;font-weight:900;font-size:13px;color:#fff;user-select:none;
  }
  .paper-left.journal{background:var(--journal-gold);color:#111;}
  .paper-left.conference{background:var(--conference-red);}
  .paper-left.book{background:var(--book-pink);color:#fff;}
  .paper-left.report{background:var(--report-pink);color:#fff;}
  .paper-left.preprint{background:#e5e7eb;color:#6b7280;}
  .paper-left.empty{background:#f1f5f9;color:#e5e7eb;}

  .paper-body{padding:14px 16px;}

  /* Header & Badges */
  .paper-header{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:12px;
    margin-bottom:10px;
  }
  
  .indexing-badge {
    flex-shrink: 0;
    word-break: keep-all;
    overflow-wrap: anywhere;
  }
  
  .badge-group{
    display:flex;
    flex-direction:column;
    align-items:flex-end;
    gap:6px;
    flex-shrink: 0;
  }
  
  .badge-lang{
    display:inline-flex;align-items:center;height:26px;padding:0 10px;border-radius:999px;
    font-weight:800;font-size:11px;letter-spacing:.2px;white-space:nowrap;
  }
  
  .badge-lang.english{
    background:#002868;color:#fff;  /* USA flag blue */
  }
  
  .badge-lang.korean{
    background:#CD2E3A;color:#fff;  /* Korean Taegeukgi red */
  }
  
  .badge-pub{
    display:inline-flex;align-items:center;height:26px;gap:4px;padding:0 10px;background:#f8fafc;border:1px solid #e5e7eb;border-radius:999px;
    font-size:10px;font-weight:700;color:#374151;white-space:nowrap;
  }
  
  .badge-pub .lbl{color:#6b7280;font-weight:800;}
  .badge-pub .val{color:#111827;font-weight:800;}

  .paper-title{
    font-weight:900;font-size:15px;color:#111827;margin-bottom:8px;
    word-break: keep-all;
    overflow-wrap: anywhere;
    line-height: 1.4;
  }
  
  .paper-meta{
    margin-bottom:6px;color:#374151;font-size:13px;
    word-break: keep-all;
    overflow-wrap: anywhere;
    line-height: 1.4;
  }
  
  .paper-venue{
    margin-bottom:6px;color:#6b7280;font-size:12px;
    word-break: keep-all;
    overflow-wrap: anywhere;
    line-height: 1.4;
  }
  
  .paper-details{
    margin-bottom:10px;
    font-size:11px;
    color:#6b7280;
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    line-height:1.4;
  }
  
  .paper-detail-item{
    display:inline-flex;
    align-items:center;
    gap:4px;
  }
  
  .paper-detail-item .label{
    font-weight:700;
    color:#9ca3af;
  }
  
  .paper-detail-item .value{
    font-weight:600;
    color:#6b7280;
  }
  
  .paper-detail-item.doi .value{
    color:#2563eb;
    text-decoration:none;
    transition:all 0.2s;
  }
  
  .paper-detail-item.doi .value:hover{
    color:#1d4ed8;
    text-decoration:underline;
  }

  .paper-foot{display:flex;gap:8px;}

  /* Index Badges */
  .idx{
    display:inline-flex;align-items:center;padding:.3rem .6rem;border-radius:9999px;font-weight:800;font-size:11px;white-space:nowrap;
    word-break: keep-all;
  }
  .idx-scie,.idx-ssci,.idx-ahci{background:rgba(214,177,77,.95);color:#111;}
  .idx-scopus{background:rgba(214,177,77,.65);color:#111;}
  .idx-other-intl{background:rgba(214,177,77,.45);color:#111;}
  .idx-kci-exc{background:rgba(214,177,77,.35);color:#111;}
  .idx-kci{background:rgba(214,177,77,.25);color:#111;}
  .idx-other-domestic{background:rgba(214,177,77,.15);color:#111;}
  .idx-intl-conf{background:rgba(172,14,14,.85);color:#fff;}
  .idx-domestic-conf{background:rgba(172,14,14,.45);color:#fff;}
  .idx-joint-conf{background:rgba(217,119,6,.85);color:#fff;}
  .idx-book{background:var(--book-pink);color:#fff;}
  .idx-report{background:var(--report-pink);color:#fff;}
  .idx-preprint,.idx-working{background:#fff;border:1px solid #e5e7eb;color:#6b7280;}

  /* Buttons */
  .btn{padding:.4rem .8rem;border:1px solid #e5e7eb;border-radius:.6rem;background:#fff;font-weight:700;font-size:12px;cursor:pointer;transition:all .2s;}
  .btn:hover{background:#f8fafc;}

  /* Modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:20px;z-index:99999;}
  .modal{background:#fff;border-radius:1rem;max-width:720px;width:100%;max-height:80vh;overflow:auto;}
  .modal header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid #e5e7eb;background:#f8fafc;}
  .modal-title{font-size:18px;font-weight:900;color:#111827;}
  .cite-block{border:1px solid #e5e7eb;border-radius:.75rem;padding:12px 14px;background:#f8fafc;margin-bottom:12px;}
  .cite-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
  .cite-label{font-weight:800;font-size:13px;color:#111827;}
  .cite-text{font-size:13px;color:#374151;line-height:1.5;}
  .copy-btn{border:1px solid #e5e7eb;border-radius:.5rem;padding:.3rem .6rem;font-size:11px;font-weight:800;background:#fff;cursor:pointer;}
  .copy-btn:hover{background:#f8fafc;}

  /* Empty */
  .empty-state{padding:48px 20px;text-align:center;color:#6b7280;font-size:14px;font-weight:600;border:1px dashed #e5e7eb;border-radius:1rem;background:#fff;margin-top:20px;}

  /* Readability for custom superscripts */
  .paper-meta sup{
      font-size: 0.65em;
      margin-left: 1px;
      color:#6b7280;
      font-weight:600;
      vertical-align: baseline;
      line-height:1;
  }

  /* Mobile Tweaks */
  @media (max-width:640px){
    .search-container{flex-direction:column;align-items:stretch;}
    .search{width:100%;}
    .count{text-align:center;width:100%;}
    .paper-row{grid-template-columns:48px 1fr;}
    .paper-title{font-size:14px;}
    .chip{font-size:11px;padding:.4rem .8rem;}
    
    .authorship-grid {
      grid-template-columns: 1fr;
    }
    
    .authorship-item {
      padding: 10px;
    }
    
    .paper-header{
      flex-direction:column;
      align-items:flex-start;
      gap:8px;
    }
    
    .badge-group{
      align-self: flex-end;
      flex-direction:row;
      align-items:center;
      gap:6px;
    }
    
    .badge-lang{height:24px;padding:0 8px;font-size:10px;}
    .badge-pub{height:24px;padding:0 8px;font-size:9px;gap:3px;}
  }

  @media (max-width:380px){
    .badge-pub .lbl{display:none;}
    .badge-pub{gap:0;padding:0 6px;}
    .badge-lang{font-size:9px;padding:0 6px;}
    
    .authorship-mark {
      min-width: 24px;
      height: 24px;
      font-size: 10px;
      margin-right: 8px;
    }
    
    .authorship-en {
      font-size: 11px;
    }
    
    .authorship-ko {
      font-size: 10px;
    }
  }
</style>

<!-- ===== Toolbar (Search + Authorship Legend + Filters) ===== -->
<section class="max-w-7xl mx-auto px-4">
  <div class="toolbar">
    <div class="search-container">
      <div class="search">
        <input id="pubSearch" type="text" placeholder="Search by title, author, venue..." />
      </div>
      <div class="count" id="count"></div>
    </div>
  </div>
</section>

<!-- ===== Authorship Legend ===== -->
<section class="max-w-7xl mx-auto px-4">
  <div class="authorship-legend">
    <h3 class="authorship-title">Authorship Remarks</h3>
    <div class="authorship-grid">
      <div class="authorship-item">
        <span class="authorship-mark">P</span>
        <div class="authorship-desc">
          <span class="authorship-en">Principal Investigator</span>
          <span class="authorship-ko">연구 책임자</span>
        </div>
      </div>
      <div class="authorship-item">
        <span class="authorship-mark">L</span>
        <div class="authorship-desc">
          <span class="authorship-en">Leading Researcher</span>
          <span class="authorship-ko">책임 연구원</span>
        </div>
      </div>
      <div class="authorship-item">
        <span class="authorship-mark">R</span>
        <div class="authorship-desc">
          <span class="authorship-en">Researcher</span>
          <span class="authorship-ko">참여 연구원</span>
        </div>
      </div>
      <div class="authorship-item">
        <span class="authorship-mark">A</span>
        <div class="authorship-desc">
          <span class="authorship-en">Advisor (Thesis / Dissertation)</span>
          <span class="authorship-ko">지도교수 (학위논문)</span>
        </div>
      </div>
      <div class="authorship-item">
        <span class="authorship-mark">1</span>
        <div class="authorship-desc">
          <span class="authorship-en">First Author</span>
          <span class="authorship-ko">제1저자</span>
        </div>
      </div>
      <div class="authorship-item">
        <span class="authorship-mark">2</span>
        <div class="authorship-desc">
          <span class="authorship-en">Second Author / Co-author</span>
          <span class="authorship-ko">제2저자 / 공동저자</span>
        </div>
      </div>
      <div class="authorship-item">
        <span class="authorship-mark">3</span>
        <div class="authorship-desc">
          <span class="authorship-en">Third Author</span>
          <span class="authorship-ko">제3저자</span>
        </div>
      </div>
      <div class="authorship-item">
        <span class="authorship-mark asterisk">*</span>
        <div class="authorship-desc">
          <span class="authorship-en">Corresponding Author</span>
          <span class="authorship-ko">교신저자</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ===== Filter Sections ===== -->
<section class="max-w-7xl mx-auto px-4">
  <div class="toolbar">
    <div class="filter-section">
      <label class="filter-label">Publication Type</label>
      <div class="chips" id="typeChips"></div>
    </div>

    <div class="filter-section">
      <label class="filter-label">Journal Indexing</label>
      <div class="chips" id="journalChips"></div>
    </div>

    <div class="filter-section">
      <label class="filter-label">Conference</label>
      <div class="chips" id="conferenceChips"></div>
    </div>
  </div>
</section>

<!-- ===== Publications ===== -->
<section class="max-w-7xl mx-auto px-4 mt-6" id="pubWrap"></section>

<!-- ===== Cite Modal ===== -->
<div id="citeModal" class="modal-backdrop">
  <div class="modal">
    <header>
      <h3 class="modal-title">Citation Formats</h3>
      <button id="btnCloseCite" class="copy-btn">Close</button>
    </header>
    <div class="p-4" id="citeBody"></div>
  </div>
</div>

<!-- ===== Load global AUTHORS from include ===== -->
<script>
  const AUTHORS = {
    1:{en:"Insu Choi",ko:"최인수"},
    2:{en:"Woosung Koh",ko:"고우성"},
    3:{en:"Minhyuk Lee",ko:"이민혁"},
    4:{en:"Taekyu Lee",ko:"이태규"},
    5:{en:"Seungpyo Park",ko:"박승표"},
    6:{en:"Kyungsung Shin",ko:"신경성"},
    7:{en:"Soyoung Lee",ko:"이소영"},
    8:{en:"Woochangkim Kim",ko:"김우창"},
    9:{en:"Jiho Kim",ko:"김지호"},
    10:{en:"Minseok Kim",ko:"김민석"},
    11:{en:"Woosang Lim",ko:"임우상"},
    12:{en:"Doyoung Lee",ko:"이도영"},
    13:{en:"Taechan Ahn",ko:"안태찬"},
    14:{en:"Geonhee Kang",ko:"강건희"},
    15:{en:"Yedam Jang",ko:"장예담"},
    16:{en:"Jinwoo Choi",ko:"최진우"},
    17:{en:"Wonmin Choi",ko:"최원민"},
    18:{en:"Joonhyup Lee",ko:"이준협"},
    19:{en:"Younghwan Cho",ko:"조영환"},
    20:{en:"Hyunsoo Choi",ko:"최현수"},
    21:{en:"Wonje Yun",ko:"윤원제"},
    22:{en:"Sukyeon Park",ko:"박수견"},
    23:{en:"Chaeyeon Lee",ko:"이채연"},
    24:{en:"Ahwon Kim",ko:"김아원"},
    25:{en:"Eunsoo Choi",ko:"최은수"},
    26:{en:"Soohyeong Kim",ko:"김수형"},
    27:{en:"Kyoungryeong Min",ko:"민경영"},
    28:{en:"Joonwoo Bae",ko:"배준우"},
    29:{en:"Kyoungwoon Jeong",ko:"정경운"},
    30:{en:"Jiseon Shin",ko:"신지선"},
    31:{en:"Dongin Lee",ko:"이동인"},
    32:{en:"Jinho Yoon",ko:"윤진호"},
    33:{en:"Seongpil Park",ko:"박성필"},
    34:{en:"Woochang Kim",ko:"김우창"},
    35:{en:"Jihee Kim",ko:"김지희"},
    36:{en:"Chunghwan Lee",ko:"이충환"},
    37:{en:"Meeyoung Cha",ko:"차미영"},
    38:{en:"Hyungryul Bae",ko:"배형립"},
    39:{en:"Hyoungjun Yoon",ko:"윤형준"},
    40:{en:"Hyungyu Jeong",ko:"정현규"},
    41:{en:"Yejin Kim",ko:"김예진"},
    42:{en:"Seokhwan Choi",ko:"최석환"}
  };
</script>

<script>
  /* ===== Title Case Function ===== */
  function toTitleCase(str) {
    // Articles, conjunctions, and prepositions that should be lowercase (unless first/last)
    const lowercaseWords = ['a', 'an', 'and', 'as', 'at', 'but', 'by', 'for', 'from', 
                            'in', 'into', 'nor', 'of', 'on', 'or', 'the', 'to', 'via', 'with'];
    
    // Split by spaces and process each word
    const words = str.split(' ');
    
    return words.map((word, index) => {
      // Keep acronyms and already capitalized abbreviations as-is
      if (word === word.toUpperCase() && word.length > 1) return word;
      
      // First and last words are always capitalized
      if (index === 0 || index === words.length - 1) {
        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
      }
      
      // Check if it's a minor word that should be lowercase
      if (lowercaseWords.includes(word.toLowerCase())) {
        return word.toLowerCase();
      }
      
      // Capitalize first letter, lowercase rest
      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
    }).join(' ');
  }

  /* ===== Data (with title case applied) ===== */
  const PUBS = [
    // 2025 International Journals
    {year:2025,code_label:"J18",indexing_group:"SCIE",type:"journal", language:"English",
     title:"Symmetry-Aware Graph Neural Approaches for Data-Efficient Return Prediction in International Financial Market Indices",
     authors:[4,1,8], author_marks:["1","1,*","*"],
     venue:"Symmetry",
     published_date:"2025-08-22"},
    {year:2025,code_label:"J17",indexing_group:"SSCI",type:"journal", language:"English",
     title:"Deciphering the Impact of COVID-19 on Korean Sector ETFs: Insights from an ARIMAX and Granger Causality",
     authors:[1,4,5,6,7,8], author_marks:["1","1","1","1","1","*"],
     venue:"Systems",
     published_date:"2025-08-09"},
    {year:2025,code_label:"J16",indexing_group:"SSCI",type:"journal", language:"English",
     title:"Predicting Mobile Payment Behavior Through Explainable Machine Learning and Application Usage Analysis",
     authors:[3,1,8], author_marks:["1,*","1","2"],
     venue:"Journal of Theoretical and Applied Electronic Commerce Research",
     published_date:"2025-05-30"},
    {year:2025,code_label:"J15",indexing_group:"SSCI",type:"journal", language:"English",
     title:"A Multifaceted Graph-Wise Network Analysis of Sector-Based Financial Instruments' Price-Based Discrepancies with Diverse Statistical Interdependencies",
     authors:[1,8], author_marks:["1","*"],
     venue:"North American Journal of Economics and Finance",
     published_date:"2025-01-01"},
    
    // 2024 International Journals
    {year:2024,code_label:"J14",indexing_group:"SCIE",type:"journal", language:"English",
     title:"Unlocking ETF Price Forecasting: Exploring the Interconnections with Statistical Dependence-Based Graphs and xAI Techniques",
     authors:[1,8], author_marks:["1","*"],
     venue:"Knowledge-Based Systems",
     published_date:"2024-12-01"},
    {year:2024,code_label:"J13",indexing_group:"SSCI",type:"journal", language:"English",
     title:"A Temporal Information Transfer Network Approach Considering Federal Funds Rate for an Interpretable Asset Fluctuation Prediction Framework",
     authors:[1,8], author_marks:["1","*"],
     venue:"International Review of Economics & Finance",
     published_date:"2024-11-01"},
    {year:2024,code_label:"J12",indexing_group:"SSCI",type:"journal", language:"English",
     title:"Practical Forecasting of Risk Boundaries for Industrial Metals and Critical Minerals via Statistical Machine Learning Techniques",
     authors:[1,8], author_marks:["1","*"],
     venue:"International Review of Financial Analysis",
     published_date:"2024-07-01"},
    {year:2024,code_label:"J11",indexing_group:"SCIE",type:"journal", language:"English",
     title:"An Explainable Prediction for Dietary-Related Diseases via Language Models",
     authors:[1,9,8], author_marks:["1","*","*"],
     venue:"Nutrients",
     published_date:"2024-02-28"},
    {year:2024,code_label:"J10",indexing_group:"SCIE",type:"journal", language:"English",
     title:"Enhancing Exchange-Traded Fund Price Predictions: Insights from Information-Theoretic Networks and Node Embeddings",
     authors:[1,8], author_marks:["1","*"],
     venue:"Entropy",
     published_date:"2024-01-12"},
    {year:2024,code_label:"J9",indexing_group:"SCIE",type:"journal", language:"English",
     title:"Network-Based Exploratory Data Analysis and Explainable Three-Stage Deep Clustering for Financial Customer Profiling",
     authors:[1,2,15,8], author_marks:["1","1","1","*"],
     venue:"Engineering Applications of Artificial Intelligence",
     published_date:"2024-02-01"},
    
    // 2024 International Conferences  
    {year:2024,code_label:"C7",indexing_group:"International Conference",type:"conference", language:"English",
     title:"Encoding Temporal Statistical-Space Priors via Augmented Representation Under Data Scarcity",
     authors:[1,2,14,15,8], author_marks:["1","1","2","2","*"],
     venue:"3rd International Workshop on Spatio-Temporal Reasoning and Learning (STRL 2024), IJCAI 2024",
     published_date:"2024-08-05"},
    {year:2024,code_label:"C6",indexing_group:"International Conference",type:"conference", language:"English",
     title:"A Transparent Single Financial Asset Trading Framework via Reinforcement Learning",
     authors:[1,8], author_marks:["1","*"],
     venue:"10th International Conference on E-Business and Applications (ICEBA 2024)",
     published_date:"2024-02-28"},
    {year:2024,code_label:"C5",indexing_group:"International Conference",type:"conference", language:"English",
     title:"Curriculum Learning and Imitation Learning for Model-Free Control on Financial Time-Series",
     authors:[2,1,15,14,8], author_marks:["1","1","1","2","*"],
     venue:"AI for Time Series Analysis (AI4TS) Workshop, AAAI 2024",
     published_date:"2024-02-26"},
    {year:2024,code_label:"C4",indexing_group:"International Conference",type:"conference", language:"English",
     title:"An Iridescent Insight of Statistical Interdependencies of Financial Markets",
     authors:[1,8], author_marks:["1","*"],
     venue:"11th IEEE International Conference on Big Data and Smart Computing (IEEE BigComp 2024)",
     published_date:"2024-02-19"},
     
    // 2024 International-Domestic Joint Conferences
    {year:2024,code_label:"C3",indexing_group:"International - Domestic Joint Conference",type:"conference", language:"Korean",
     title:"금융 시장 하방 위험의 예측을 위한 조건부 정보 전이 그래프의 활용",
     authors:[1,8], author_marks:["1","*"],
     venue:"2024 한국경영정보학회 추계국제학술대회",
     published_date:"2024-11-15"},
    {year:2024,code_label:"C2",indexing_group:"International - Domestic Joint Conference",type:"conference", language:"Korean",
     title:"금융 시계열 예측에서의 선형 및 비선형 통계적 상호 의존성 기반의 시공간 그래프 활용에 대한 연구",
     authors:[1,8], author_marks:["1","*"],
     venue:"2024 한국지능정보시스템학회 추계국제학술대회",
     published_date:"2024-11-01"},
    
    // 2023 Publications
    {year:2023,code_label:"J8",indexing_group:"Other International",type:"journal", language:"English",
     title:"Enhancing Financial Literacy in South Korea: Integrating AI and Data Visualization to Understand Financial Instruments' Interdependencies",
     authors:[1,8], author_marks:["1","*"],
     venue:"Societal Impacts",
     published_date:"2023-12-01"},
    {year:2023,code_label:"J7",indexing_group:"SSCI",type:"journal", language:"English",
     title:"Estimating Historical Downside Risks of Global Financial Market Indices via Inflation Rate-Adjusted Dependence Graphs",
     authors:[1,8], author_marks:["1","*"],
     venue:"Research in International Business and Finance",
     published_date:"2023-10-01"},
    {year:2023,code_label:"J6",indexing_group:"SSCI",type:"journal", language:"English",
     title:"Elucidating Directed Statistical Dependencies: Investigating Global Financial Market Indices' Influence on Korean Short Selling Activities",
     authors:[1,3,9,8], author_marks:["1","1","2","*"],
     venue:"Pacific-Basin Finance Journal",
     published_date:"2023-06-01"},
    {year:2023,code_label:"C1",indexing_group:"International Conference",type:"conference", language:"English",
     title:"Hard Voting-Based Long-Short Portfolio Generation with Machine Learning Techniques and Technical Indicators",
     authors:[1,16,17,8], author_marks:["1","1","1","*"],
     venue:"24th International Symposium on Advanced Intelligent Systems (ISIS 2023)",
     published_date:"2023-12-07"},
    
    // Books
    {year:2020,code_label:"B2",indexing_group:"Book",type:"book", language:"Korean",
     title:"나만의 학생 포트폴리오 만들기: 컨셉부터 대회까지",
     authors:[1], author_marks:["1"],
     venue:"위키독스",
     published_date:"2020-06-14"},
    {year:2019,code_label:"B1",indexing_group:"Book",type:"book", language:"Korean",
     title:"UNLOCK 혁명: 데이터·AI, 세상을 바꾸다",
     authors:[25,26,27,28,29,30,31,32,33,34,35,36,37,38,1,39,40,41], author_marks:["1","R","R","R","R","R","R","R","P","P","P","P","P","R","R","R","R","R"],
     venue:"매경출판",
     published_date:"2019-11-28"}
  ];

  /* ===== Filters ===== */
  const FILTER_GROUPS = {
    type:[
      {value:"journal",label:"Journal"},
      {value:"conference",label:"Conference"},
      {value:"book",label:"Book"},
      {value:"report",label:"Report"}
    ],
    journal:[
      {value:"SCIE",label:"SCIE"},
      {value:"SSCI",label:"SSCI"},
      {value:"A&HCI",label:"A&HCI"},
      {value:"Scopus",label:"Scopus"},
      {value:"Other International",label:"Other International"},
      {value:"KCI Excellent",label:"KCI Excellent"},
      {value:"KCI Accredited",label:"KCI Accredited"},
      {value:"Other Domestic",label:"Other Domestic"},
      {value:"Book",label:"Book"},
      {value:"Report",label:"Report"},
      {value:"Preprint",label:"Preprint"},
      {value:"Working Paper",label:"Working Paper"}
    ],
    conference:[
      {value:"International Conference",label:"International Conference"},
      {value:"Domestic Conference",label:"Domestic Conference"},
      {value:"International - Domestic Joint Conference",label:"International – Domestic Joint Conference"}
    ]
  };

  /* ===== State ===== */
  let q=""; const onFilters={type:new Set(),journal:new Set(),conference:new Set()};

  /* ===== DOM ===== */
  const searchInput=document.getElementById('pubSearch');
  const countEl=document.getElementById('count');
  const pubWrap=document.getElementById('pubWrap');
  const modal=document.getElementById('citeModal');
  const citeBody=document.getElementById('citeBody');

  /* ===== Helpers ===== */
  function getAuthorName(authorId, useDomestic){
    const a=AUTHORS?.[authorId];
    if(!a) return `Author ${authorId}`;
    if(useDomestic && a.ko) return a.ko;
    if(!useDomestic && a.en) return a.en;
    return a.en || a.ko || `Author ${authorId}`;
  }
  
  function isDomesticPublication(indexing){
    if(indexing === "International - Domestic Joint Conference") return false;
    return indexing.includes("KCI") || indexing.includes("Domestic");
  }
  
  function formatMDY(iso){
    if(!iso) return "";
    const d=new Date(iso+"T00:00:00");
    return d.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});
  }

  /* ===== Build Filter Chips ===== */
  function buildChips(){
    const typeChips=document.getElementById('typeChips');
    typeChips.innerHTML=FILTER_GROUPS.type.map(it=>{
      const on=onFilters.type.has(it.value);
      return `<button class="chip chip-${it.value} ${on?'is-on':''}" data-filter-type="type" data-filter-value="${it.value}">${it.label}</button>`;
    }).join('');

    const journalChips=document.getElementById('journalChips');
    journalChips.innerHTML=FILTER_GROUPS.journal.map(it=>{
      const on=onFilters.journal.has(it.value);
      return `<button class="chip ${on?'is-on':''}" data-filter-type="journal" data-filter-value="${it.value}">${it.label}</button>`;
    }).join('');

    const conferenceChips=document.getElementById('conferenceChips');
    conferenceChips.innerHTML=FILTER_GROUPS.conference.map(it=>{
      const on=onFilters.conference.has(it.value);
      return `<button class="chip ${on?'is-on':''}" data-filter-type="conference" data-filter-value="${it.value}">${it.label}</button>`;
    }).join('');

    document.querySelectorAll('[data-filter-type]').forEach(btn=>{
      btn.onclick=()=>{
        const t=btn.dataset.filterType,v=btn.dataset.filterValue;
        if(onFilters[t].has(v)) onFilters[t].delete(v); else onFilters[t].add(v);
        buildChips(); render();
      }
    });
  }

  /* ===== Badge helper ===== */
  function idxClass(group){
    const map={
      "SCIE":"idx-scie","SSCI":"idx-ssci","A&HCI":"idx-ahci","Scopus":"idx-scopus","Other International":"idx-other-intl",
      "International Conference":"idx-intl-conf","Domestic Conference":"idx-domestic-conf",
      "International - Domestic Joint Conference":"idx-joint-conf",
      "KCI Excellent":"idx-kci-exc","KCI Accredited":"idx-kci","Other Domestic":"idx-other-domestic",
      "Book":"idx-book","Report":"idx-report",
      "Preprint":"idx-preprint","Working Paper":"idx-working"
    };
    return `idx ${map[group]||''}`;
  }

  /* ===== Match ===== */
  function matches(pub){
    // Check publication type filter
    if(onFilters.type.size>0) {
      // International - Domestic Joint Conference should count as conference
      let pubType = pub.type;
      if(pub.indexing_group === "International - Domestic Joint Conference") {
        pubType = "conference";
      }
      if(!onFilters.type.has(pubType)) return false;
    }
    
    // Check indexing filters
    const idxFilters=[...onFilters.journal,...onFilters.conference];
    if(idxFilters.length>0 && !idxFilters.includes(pub.indexing_group)) return false;
    if(!q) return true;

    const forceEnglish = (pub.indexing_group === "International - Domestic Joint Conference");
    const isDom = forceEnglish ? false : isDomesticPublication(pub.indexing_group);
    const names = pub.authors.map(id=>getAuthorName(id,isDom)).join(" ");
    const text=(pub.title+" "+names+" "+pub.venue).toLowerCase();
    return text.includes(q.toLowerCase());
  }

  /* ===== Create Card ===== */
  function createCard(pub, key){
    const code=pub.code_label||"";
    let leftClass='';
    
    // Determine left class based on type and indexing
    if(pub.indexing_group==="International - Domestic Joint Conference") {
      leftClass='conference'; // Joint conference should use conference color
    } else if(pub.type==="report") {
      leftClass='report';
    } else if(pub.type==="book") {
      leftClass='book';
    } else if(pub.indexing_group==="Preprint") {
      leftClass='preprint';
    } else {
      leftClass=pub.type;
    }

    // Determine language (use the language field)
    const lang = pub.language || 'English';
    const isKorean = lang === 'Korean';
    
    // Use Korean title if available and it's Korean publication
    const displayTitle = (isKorean && pub.title_ko) ? pub.title_ko : pub.title;
    
    // Use Korean venue if available and it's Korean publication  
    const displayVenue = (isKorean && pub.venue_ko) ? pub.venue_ko : pub.venue;

    // Author rendering with proper language based on publication language
    const authors = pub.authors.map((id, idx) => {
      const name = getAuthorName(id, isKorean); // Use Korean names for Korean publications
      const mark = Array.isArray(pub.author_marks) ? (pub.author_marks[idx] || "") : "";
      const sup = mark ? `<sup>${String(mark)}</sup>` : "";
      return `${name}${sup}`;
    }).join(", ");

    // Language badge instead of year
    const langBadge = `<span class="badge-lang ${lang.toLowerCase()}">${lang}</span>`;
    
    const dateBadges = `
      <div class="badge-group">
        ${langBadge}
        ${pub.published_date ? `
          <span class="badge-pub">
            <span class="lbl">Published</span>
            <span class="val">${formatMDY(pub.published_date)}</span>
          </span>` : ``}
      </div>`;
    
    // Build citation details
    let citationDetails = [];
    if(pub.volume) citationDetails.push(`<div class="paper-detail-item"><span class="label">Vol.</span><span class="value">${pub.volume}</span></div>`);
    if(pub.issue) citationDetails.push(`<div class="paper-detail-item"><span class="label">No.</span><span class="value">${pub.issue}</span></div>`);
    if(pub.pages) citationDetails.push(`<div class="paper-detail-item"><span class="label">pp.</span><span class="value">${pub.pages}</span></div>`);
    if(pub.isbn) citationDetails.push(`<div class="paper-detail-item"><span class="label">ISBN</span><span class="value">${pub.isbn}</span></div>`);
    if(pub.doi) citationDetails.push(`<div class="paper-detail-item doi"><span class="label">DOI</span><a href="https://doi.org/${pub.doi}" target="_blank" class="value">${pub.doi}</a></div>`);
    
    const detailsHtml = citationDetails.length > 0 ? 
      `<div class="paper-details">${citationDetails.join('')}</div>` : '';

    return `
      <li class="paper-card">
        <div class="paper-row">
          <div class="paper-left ${leftClass} ${code ? '' : 'empty'}"><span>${code || '&nbsp;'}</span></div>
          <div class="paper-body">
            <div class="paper-header">
              <span class="indexing-badge ${idxClass(pub.indexing_group)}">${pub.indexing_group}</span>
              ${dateBadges}
            </div>
            <h3 class="paper-title">${displayTitle}</h3>
            <div class="paper-meta">${authors}</div>
            <div class="paper-venue">${displayVenue}</div>
            ${detailsHtml}
            <div class="paper-foot">
              <button class="btn" onclick='openCite(${JSON.stringify(pub)})'>Cite</button>
            </div>
          </div>
        </div>
      </li>
    `;
  }

  /* ===== Render ===== */
  function render(){
    const filtered=PUBS.filter(matches);
    const years=[...new Set(filtered.map(p=>p.year))].sort((a,b)=>b-a);

    if(filtered.length===0){
      pubWrap.innerHTML=`<div class="empty-state">No publications found. Try adjusting your search or filters.</div>`;
    }else{
      pubWrap.innerHTML=years.map(y=>{
        const items=filtered.filter(p=>p.year===y);
        return `
          <div class="year-section">
            <div class="year-head">
              <h2 class="year-title">${y}</h2>
              <button class="year-toggle" data-year="${y}">Collapse</button>
            </div>
            <div class="year-content" id="year-${y}">
              <ul class="paper-list">
                ${items.map((it,i)=>createCard(it,`${y}-${i}`)).join('')}
              </ul>
            </div>
          </div>
        `;
      }).join('');

      document.querySelectorAll('.year-toggle').forEach(btn=>{
        btn.onclick=()=>{
          const y=btn.dataset.year;
          const el=document.getElementById('year-'+y);
          const hide=el.style.display==='none';
          el.style.display=hide?'':'none';
          btn.textContent=hide?'Collapse':'Expand';
        };
      });
    }
    countEl.textContent=`${filtered.length} of ${PUBS.length}`;
  }

  /* ===== Cite Modal ===== */
  function toInitials(name){
    const clean=name.replace(/\*/g,'').trim();
    const parts=clean.split(/\s+/);
    const last=parts.pop();
    const initials=parts.map(p=>(p?.[0]||'').toUpperCase()+".").join(" ");
    return `${last}, ${initials}`;
  }
  function openCite(pub){
    const authorNames=pub.authors.map(id=>getAuthorName(id,false));
    
    // Build volume/issue/pages string
    let pubDetails = '';
    if(pub.volume) pubDetails += `, ${pub.volume}`;
    if(pub.issue) pubDetails += `(${pub.issue})`;
    if(pub.pages) pubDetails += `, ${pub.pages}`;
    if(pub.doi) pubDetails += `. https://doi.org/${pub.doi}`;
    
    // For books, use ISBN instead
    let bookDetails = '';
    if(pub.isbn) bookDetails = `. ISBN: ${pub.isbn}`;
    
    const isBook = pub.type === 'book';
    const details = isBook ? bookDetails : pubDetails;
    
    const formats={
      MLA: `${authorNames[0]} et al. "${pub.title}." ${pub.venue}${details} (${pub.year}).`,
      APA: `${toInitials(authorNames[0])} et al. (${pub.year}). ${pub.title}. ${pub.venue}${details}.`,
      Chicago: `${authorNames[0]} et al. ${pub.year}. "${pub.title}." ${pub.venue}${details}.`,
      Harvard: `${toInitials(authorNames[0])} et al. (${pub.year}) ${pub.title}. ${pub.venue}${details}.`,
      Vancouver: `${authorNames.map(a=>toInitials(a)).join(', ')}. ${pub.title}. ${pub.venue}. ${pub.year}${details}.`
    };
    citeBody.innerHTML=Object.entries(formats).map(([label,text])=>{
      const id='cite-'+Math.random().toString(36).slice(2,9);
      return `
        <div class="cite-block">
          <div class="cite-header">
            <span class="cite-label">${label}</span>
            <button class="copy-btn" onclick="copyText('${id}')">Copy</button>
          </div>
          <div class="cite-text" id="${id}">${text}</div>
        </div>
      `;
    }).join('');
    document.getElementById('citeModal').style.display='flex';
  }
  function copyText(id){
    const t=document.getElementById(id).textContent;
    navigator.clipboard.writeText(t);
    event.target.textContent='Copied!';
    setTimeout(()=>event.target.textContent='Copy',1500);
  }

  /* ===== Events ===== */
  document.getElementById('pubSearch').oninput=(e)=>{ q=e.target.value; render(); };
  document.getElementById('btnCloseCite').onclick=()=>document.getElementById('citeModal').style.display='none';
  document.getElementById('citeModal').onclick=(e)=>{ if(e.target===document.getElementById('citeModal')) document.getElementById('citeModal').style.display='none'; };

  /* ===== Init ===== */
  buildChips(); render();
</script>
