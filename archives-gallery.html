---
layout: default
title: archives-gallery
permalink: /archives-gallery.html
---

<!-- ===== Gallery Styles ===== -->
<style>
  /* Breadcrumbs (banner) */
  .breadcrumbs{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;font-size:12px}
  .breadcrumbs a{color:#e5e7eb}
  .breadcrumbs a:hover{text-decoration:underline}
  .breadcrumbs .sep{opacity:.85}

  /* Toolbar */
  .gal-toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;background:#f8fafc;border:1px solid #e5e7eb;border-radius:1rem;padding:12px 14px;margin-top:18px}
  .gal-search{flex:1 1 260px}
  .gal-search input{width:100%;border:1px solid #e5e7eb;border-radius:.6rem;padding:.55rem .8rem;font-size:14px}
  .gal-count{font-size:12px;font-weight:800;color:#64748b}

  /* Grid */
  .gal-grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:16px}
  @media (min-width:640px){ .gal-grid{grid-template-columns:repeat(2,minmax(0,1fr))} }
  @media (min-width:1024px){ .gal-grid{grid-template-columns:repeat(3,minmax(0,1fr))} }

  /* Card */
  .gal-card{display:block;border:1px solid #e5e7eb;border-radius:1rem;overflow:hidden;background:#fff;transition:transform .2s ease, box-shadow .2s ease}
  .gal-card:hover{transform:translateY(-2px);box-shadow:0 10px 28px rgba(0,0,0,.08)}
  .gal-thumb{height:180px;background-size:cover;background-position:center}
  .gal-info{padding:12px 14px}
  .gal-title{font-weight:900;font-size:15px;color:#0f172a;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
  .gal-date{margin-top:4px;font-size:12px;color:#6b7280}
  .gal-tags{margin-top:8px;display:flex;flex-wrap:wrap;gap:6px}
  .gal-tag{font-size:11px;font-weight:800;border:1px solid #e5e7eb;border-radius:999px;background:#fff;color:#111827;padding:.15rem .5rem}

  /* Empty state */
  .gal-empty{padding:32px;text-align:center;color:#6b7280;font-weight:700;border:1px dashed #e5e7eb;border-radius:1rem;background:#fff}
</style>

<!-- ===== Page Title / Banner ===== -->
<section class="max-w-7xl mx-auto px-4 mt-6">
  <div class="relative rounded-2xl overflow-hidden ring-1 ring-slate-200">
    <img src="{{ '/assets/img/banners/news-hero.jpg' | relative_url }}" alt="Gallery banner"
         class="w-full h-[200px] md:h-[260px] object-cover" width="1600" height="320">
    <div class="absolute inset-0 bg-black/45"></div>
    <div class="absolute inset-x-0 bottom-4 px-4">
      <div class="max-w-7xl mx-auto text-white">
        <!-- Breadcrumbs -->
        <nav aria-label="Breadcrumb" class="breadcrumbs mb-1">
          <a href="{{ '/' | relative_url }}">Home</a>
          <span class="sep">›</span>
          <span>Archives</span>
          <span class="sep">›</span>
          <span aria-current="page" class="font-semibold">Gallery</span>
        </nav>
        <!-- Title -->
        <h1 class="text-2xl md:text-3xl font-extrabold">Lab Gallery</h1>
        <p class="text-sm md:text-[15px] opacity-95">Albums and photo stories from FINDS Lab.</p>
      </div>
    </div>
  </div>
</section>

<!-- ===== Toolbar ===== -->
<section class="max-w-7xl mx-auto px-4">
  <div class="gal-toolbar">
    <div class="gal-search">
      <input id="gal-q" type="text" placeholder="Search by title or tag…">
    </div>
    <div class="gal-count" id="gal-count"></div>
  </div>
</section>

<!-- ===== Gallery List ===== -->
<section class="max-w-7xl mx-auto px-4 mt-6">
  {% comment %}
    /gallery/ 경로의 페이지 또는 포스트 수집 (폴더형 index.md 포함)
    정렬: 최신 날짜 우선
  {% endcomment %}
  {% assign all_items = site.pages | concat: site.posts %}
  {% assign galleries = "" | split: "" %}
  {% for item in all_items %}
    {% if item.url and item.title and item.url contains '/gallery/' and item.url != '/archives-gallery.html' %}
      {% assign galleries = galleries | push: item %}
    {% endif %}
  {% endfor %}
  {% assign galleries = galleries | sort: 'date' | reverse %}

  {% if galleries.size == 0 %}
    <div class="gal-empty">게시글이 없습니다.</div>
  {% else %}
    <ul id="gal-grid" class="gal-grid" role="list">
      {% for post in galleries %}
        {%- assign raw_thumb = post.thumb | default: post.image | default: post.cover -%}
        {%- if raw_thumb -%}
          {%- if raw_thumb contains '://' or raw_thumb startswith '/' -%}
            {%- assign thumb_url = raw_thumb | relative_url -%}
          {%- else -%}
            {%- comment -%}
              폴더형(index.md)일 경우: post.url 이 끝에 / 로 끝나므로 파일명 그대로 이어붙이면 됨.
              파일형(.md)일 경우: 상대경로 thumb를 그대로 쓰는 것을 권장.
            {%- endcomment -%}
            {%- assign thumb_url = post.url | append: raw_thumb | relative_url -%}
          {%- endif -%}
        {%- else -%}
          {%- assign thumb_url = '/assets/img/placeholders/gallery.jpg' | relative_url -%}
        {%- endif -%}

        {%- assign date_txt = '' -%}
        {%- if post.date -%}
          {%- assign date_txt = post.date | date: "%Y.%m.%d" -%}
        {%- endif -%}

        {%- assign tag_text = '' -%}
        {%- if post.tags and post.tags.size > 0 -%}
          {%- assign tag_text = post.tags | join: ' ' -%}
        {%- endif -%}

        <li
          class="gal-item"
          role="listitem"
          data-text="{{ post.title | escape }} {{ tag_text | escape }}"
        >
          <a class="gal-card" href="{{ post.url | relative_url }}">
            <div class="gal-thumb" style="background-image:url('{{ thumb_url }}')"></div>
            <div class="gal-info">
              <h3 class="gal-title">{{ post.title }}</h3>
              {% if date_txt != '' %}<p class="gal-date">{{ date_txt }}</p>{% endif %}
              {% if post.tags and post.tags.size > 0 %}
                <div class="gal-tags">
                  {% for t in post.tags %}
                    <span class="gal-tag">#{{ t }}</span>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
</section>

<!-- ===== Page JS (client-side search) ===== -->
<script>
  (function(){
    const q = document.getElementById('gal-q');
    const grid = document.getElementById('gal-grid');
    const cnt = document.getElementById('gal-count');
    if(!q || !grid) return;

    const items = Array.from(grid.querySelectorAll('.gal-item'));
    const total = items.length;

    function renderCount(n){
      cnt.textContent = `Showing ${n} of ${total}`;
    }

    function applyFilter(){
      const term = q.value.trim().toLowerCase();
      let visible = 0;
      items.forEach(li => {
        const text = (li.getAttribute('data-text') || '').toLowerCase();
        const show = !term || text.includes(term);
        li.style.display = show ? '' : 'none';
        if (show) visible++;
      });
      renderCount(visible);
    }

    renderCount(total);
    q.addEventListener('input', applyFilter);
  })();
</script>
