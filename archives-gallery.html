---
layout: default
title: gallery
permalink: /archives-gallery.html
---

<!-- ===== Styles ===== -->
<style>
  /* Breadcrumbs */
  .breadcrumbs{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;font-size:12px}
  .breadcrumbs a{color:#e5e7eb}
  .breadcrumbs a:hover{text-decoration:underline}
  .breadcrumbs .sep{opacity:.8}

  /* Search Container */
  .search-container{
    display:flex;
    align-items:center;
    gap:12px;
    flex-wrap:wrap;
    background:#f8fafc;
    border:1px solid #e5e7eb;
    border-radius:1rem;
    padding:16px;
    margin-top:20px;
  }
  
  .search-box{
    flex:1;
    min-width:0;
  }
  
  .search-box input{
    width:100%;
    border:1px solid #e5e7eb;
    border-radius:.6rem;
    padding:.6rem .8rem;
    font-size:14px;
    box-sizing:border-box;
  }
  
  .search-count{
    font-size:13px;
    color:#6b7280;
    font-weight:600;
    background:#fff;
    padding:.4rem .8rem;
    border:1px solid #e5e7eb;
    border-radius:.5rem;
    white-space:nowrap;
  }

  /* Gallery Grid */
  .gallery-grid{
    display:grid;
    gap:20px;
    margin-top:24px;
    grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));
  }
  
  @media (max-width: 640px) {
    .gallery-grid{
      grid-template-columns:1fr;
      gap:16px;
    }
    
    .search-count{
      text-align:center;
      width:100%;
    }
  }

  /* Gallery Card */
  .gallery-card{
    background:#fff;
    border:1px solid #e5e7eb;
    border-radius:1rem;
    overflow:hidden;
    transition:all 0.2s;
    cursor:pointer;
    display:flex;
    flex-direction:column;
    text-decoration:none;
  }
  
  .gallery-card:hover{
    transform:translateY(-4px);
    box-shadow:0 12px 32px rgba(0,0,0,0.1);
  }

  /* Thumbnail */
  .gallery-thumb{
    width:100%;
    height:200px;
    background-color:#f3f4f6;
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;
    position:relative;
    overflow:hidden;
  }
  
  .gallery-thumb::after{
    content:'';
    position:absolute;
    inset:0;
    background:linear-gradient(to bottom, transparent 70%, rgba(0,0,0,0.3));
    opacity:0;
    transition:opacity 0.2s;
  }
  
  .gallery-card:hover .gallery-thumb::after{
    opacity:1;
  }

  /* Card Content */
  .gallery-content{
    padding:16px;
    flex:1;
    display:flex;
    flex-direction:column;
  }

  /* Date Badge */
  .gallery-date{
    display:inline-flex;
    align-items:center;
    padding:3px 8px;
    background:#f8fafc;
    border:1px solid #e5e7eb;
    border-radius:999px;
    font-size:11px;
    font-weight:600;
    color:#6b7280;
    margin-bottom:10px;
    align-self:flex-start;
  }

  /* Title */
  .gallery-title{
    font-size:16px;
    font-weight:800;
    color:#111827;
    line-height:1.4;
    margin-bottom:8px;
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }

  /* Tags */
  .gallery-tags{
    display:flex;
    flex-wrap:wrap;
    gap:6px;
    margin-top:auto;
    padding-top:12px;
  }
  
  .gallery-tag{
    display:inline-flex;
    padding:3px 10px;
    background:#fff;
    border:1px solid #e5e7eb;
    border-radius:999px;
    font-size:11px;
    font-weight:600;
    color:#374151;
  }

  /* Empty State */
  .empty-state{
    grid-column:1/-1;
    padding:60px 20px;
    text-align:center;
  }
  
  .empty-icon{
    width:80px;
    height:80px;
    margin:0 auto 20px;
    background:#f3f4f6;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:32px;
  }
  
  .empty-title{
    font-size:18px;
    font-weight:800;
    color:#111827;
    margin-bottom:8px;
  }
  
  .empty-text{
    font-size:14px;
    color:#6b7280;
  }

  /* Mobile Optimizations */
  @media (max-width: 640px) {
    .search-container{
      flex-direction:column;
      align-items:stretch;
      gap:12px;
    }
    
    .search-box{
      width:100%;
    }
    
    .gallery-thumb{
      height:160px;
    }
    
    .gallery-title{
      font-size:15px;
    }
  }
</style>

<!-- ===== Page Title / Banner ===== -->
<section class="max-w-7xl mx-auto px-4 mt-6">
  <div class="relative rounded-2xl overflow-hidden ring-1 ring-slate-200">
    <img src="{{ '/assets/img/banners/gallery-hero.jpg' | relative_url }}" 
         alt="Gallery" 
         class="w-full h-[200px] md:h-[260px] object-cover" 
         width="1600" height="320">
    <div class="absolute inset-0 bg-black/45"></div>
    <div class="absolute inset-x-0 bottom-4 px-4">
      <div class="max-w-7xl mx-auto text-white">
        <nav aria-label="Breadcrumb" class="breadcrumbs mb-1">
          <a href="{{ '/' | relative_url }}">Home</a>
          <span class="sep">›</span>
          <span>Archives</span>
          <span class="sep">›</span>
          <span aria-current="page" class="font-semibold">Gallery</span>
        </nav>
        <h1 class="text-2xl md:text-3xl font-extrabold">Gallery</h1>
      </div>
    </div>
  </div>
</section>

<!-- ===== Search ===== -->
<section class="max-w-7xl mx-auto px-4">
  <div class="search-container">
    <div class="search-box">
      <input id="searchInput" type="text" placeholder="Search by title or tags...">
    </div>
    <div class="search-count" id="searchCount">Loading...</div>
  </div>
</section>

<!-- ===== Gallery Grid (Jekyll Integration) ===== -->
<section class="max-w-7xl mx-auto px-4 pb-8">
  {% comment %}
    Collect all pages in /gallery/ directory with index.md files
  {% endcomment %}
  {% assign all_items = site.pages | concat: site.posts %}
  {% assign galleries = "" | split: "" %}
  
  {% for item in all_items %}
    {% if item.url contains '/gallery/' and item.url != '/archives-gallery.html' and item.title %}
      {% assign galleries = galleries | push: item %}
    {% endif %}
  {% endfor %}
  
  {% comment %}
    Sort by date (newest first), undated items go to the end
  {% endcomment %}
  {% assign dated = "" | split: "" %}
  {% assign undated = "" | split: "" %}
  {% for g in galleries %}
    {% if g.date %}
      {% assign dated = dated | push: g %}
    {% else %}
      {% assign undated = undated | push: g %}
    {% endif %}
  {% endfor %}
  {% assign dated = dated | sort: 'date' | reverse %}
  {% assign galleries_sorted = dated | concat: undated %}
  
  {% if galleries_sorted.size == 0 %}
    <div class="empty-state">
      <div class="empty-icon">📷</div>
      <div class="empty-title">No gallery items found</div>
      <div class="empty-text">Gallery albums will appear here once created</div>
    </div>
  {% else %}
    <div class="gallery-grid" id="galleryGrid">
      {% for gallery in galleries_sorted %}
        {% comment %}
          Determine thumbnail: 
          1) front matter thumb
          2) first image in gallery folder
          3) placeholder
        {% endcomment %}
        {% assign thumb_url = nil %}
        
        {% if gallery.thumb %}
          {% if gallery.thumb contains '://' or gallery.thumb[0] == '/' %}
            {% assign thumb_url = gallery.thumb | relative_url %}
          {% else %}
            {% assign base = gallery.url %}
            {% if base[-1] != '/' %}{% assign base = base | append: '/' %}{% endif %}
            {% assign thumb_url = base | append: gallery.thumb | relative_url %}
          {% endif %}
        {% endif %}
        
        {% if thumb_url == nil %}
          {% comment %} Find first image in gallery folder {% endcomment %}
          {% assign gallery_files = site.static_files | where_exp: "f", "f.path contains gallery.url" %}
          {% assign images = "" | split: "" %}
          {% for f in gallery_files %}
            {% assign ext = f.extname | downcase %}
            {% if ext == '.jpg' or ext == '.jpeg' or ext == '.png' or ext == '.webp' %}
              {% assign images = images | push: f %}
            {% endif %}
          {% endfor %}
          {% if images.size > 0 %}
            {% assign thumb_url = images[0].path | relative_url %}
          {% endif %}
        {% endif %}
        
        {% unless thumb_url %}
          {% assign thumb_url = '/assets/img/placeholders/gallery.jpg' | relative_url %}
        {% endunless %}
        
        {% comment %} Build search text for filtering {% endcomment %}
        {% assign search_text = gallery.title | downcase %}
        {% if gallery.tags %}
          {% assign tags_text = gallery.tags | join: ' ' | downcase %}
          {% assign search_text = search_text | append: ' ' | append: tags_text %}
        {% endif %}
        
        <a href="{{ gallery.url | relative_url }}" 
           class="gallery-card" 
           target="_blank"
           data-search="{{ search_text | escape }}">
          <div class="gallery-thumb" style="background-image:url('{{ thumb_url }}')"></div>
          <div class="gallery-content">
            {% if gallery.date %}
              <span class="gallery-date">
                {{ gallery.date | date: "%b %d, %Y" }}
              </span>
            {% endif %}
            <h3 class="gallery-title">{{ gallery.title }}</h3>
            {% if gallery.tags and gallery.tags.size > 0 %}
              <div class="gallery-tags">
                {% for tag in gallery.tags %}
                  <span class="gallery-tag">#{{ tag }}</span>
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </a>
      {% endfor %}
    </div>
  {% endif %}
</section>

<!-- ===== Search Script ===== -->
<script>
(function() {
  const searchInput = document.getElementById('searchInput');
  const searchCount = document.getElementById('searchCount');
  const galleryGrid = document.getElementById('galleryGrid');
  
  if (!searchInput || !galleryGrid) return;
  
  const cards = Array.from(galleryGrid.querySelectorAll('.gallery-card'));
  const totalCount = cards.length;
  
  function updateCount(visible) {
    searchCount.textContent = visible + ' of ' + totalCount;
  }
  
  function filterGallery() {
    const searchTerm = searchInput.value.toLowerCase().trim();
    let visibleCount = 0;
    
    cards.forEach(card => {
      const searchText = card.dataset.search || '';
      const isMatch = !searchTerm || searchText.includes(searchTerm);
      
      if (isMatch) {
        card.style.display = '';
        visibleCount++;
      } else {
        card.style.display = 'none';
      }
    });
    
    updateCount(visibleCount);
    
    // Show empty state if no results
    if (visibleCount === 0 && searchTerm) {
      if (!document.getElementById('searchEmpty')) {
        const emptyDiv = document.createElement('div');
        emptyDiv.id = 'searchEmpty';
        emptyDiv.className = 'empty-state';
        emptyDiv.innerHTML = `
          <div class="empty-icon">🔍</div>
          <div class="empty-title">No results found</div>
          <div class="empty-text">Try adjusting your search term</div>
        `;
        galleryGrid.appendChild(emptyDiv);
      }
    } else {
      const searchEmpty = document.getElementById('searchEmpty');
      if (searchEmpty) searchEmpty.remove();
    }
  }
  
  // Initial count
  updateCount(totalCount);
  
  // Search event
  searchInput.addEventListener('input', filterGallery);
})();
</script>
