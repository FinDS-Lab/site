---
layout: default
title: archives-gallery
permalink: /archives-gallery.html
---

<!-- ===== Gallery Styles ===== -->
<style>
  /* Banner 안의 breadcrumbs */
  .breadcrumbs{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;font-size:12px}
  .breadcrumbs a{color:#e5e7eb}
  .breadcrumbs a:hover{text-decoration:underline}
  .breadcrumbs .sep{opacity:.85}

  /* Toolbar */
  .g-toolbar{display:flex;flex-direction:column;gap:12px;background:#f8fafc;border:1px solid #e5e7eb;border-radius:1rem;padding:14px;margin-top:18px}
  .g-toolbar .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between}
  .g-search input{width:100%;max-width:380px;border:1px solid #e5e7eb;border-radius:.6rem;padding:.55rem .8rem;font-size:14px}
  .g-count{font-size:12px;color:#475569;font-weight:800}

  /* Grid */
  .g-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:16px}
  @media (max-width:1024px){ .g-grid{grid-template-columns:repeat(2,1fr)} }
  @media (max-width:640px){  .g-grid{grid-template-columns:1fr} }

  /* Card */
  .g-card{
    position:relative;overflow:hidden;border-radius:1rem;
    border:1px solid #e5e7eb;background:#fff;min-height:240px;
    transition:transform .2s ease, box-shadow .2s ease;
  }
  .g-card:hover{transform:translateY(-3px);box-shadow:0 12px 32px rgba(0,0,0,.10)}
  .g-cover{
    position:absolute;inset:0;background:#0b1020 center/cover no-repeat;
    filter:saturate(105%);
  }
  .g-grad{
    position:absolute;inset:0;
    background:linear-gradient(180deg, rgba(0,0,0,.00) 30%, rgba(0,0,0,.65) 100%);
  }
  .g-meta{
    position:absolute;left:0;right:0;bottom:0;padding:14px 14px 12px;
    color:#fff;
  }
  .g-title{font-size:15px;line-height:1.35;font-weight:900;margin:0 0 6px}
  .g-date{font-size:12px;opacity:.95}
  .g-link{position:absolute;inset:0;display:block}

  /* Empty */
  .g-empty{padding:28px;text-align:center;color:#6b7280;font-weight:700;border:1px dashed #e5e7eb;border-radius:1rem;background:#fff;margin-top:16px}

  /* Load more */
  .g-more-wrap{display:flex;justify-content:center;margin-top:16px}
  .g-more{
    display:inline-flex;align-items:center;justify-content:center;
    padding:.55rem 1rem;border-radius:.75rem;font-weight:900;font-size:14px;
    background:var(--accent);color:#fff;border:1px solid rgba(0,0,0,.05);
    transition:transform .2s ease, opacity .2s ease;
  }
  .g-more:hover{transform:translateY(-1px);opacity:.95}
</style>

<!-- ===== Page Title / Banner ===== -->
<section class="max-w-7xl mx-auto px-4 mt-6">
  <div class="relative rounded-2xl overflow-hidden ring-1 ring-slate-200">
    <img src="{{ '/assets/img/banners/gallery-hero.jpg' | relative_url }}" alt="Gallery banner"
         class="w-full h-[200px] md:h-[260px] object-cover" width="1600" height="320">
    <div class="absolute inset-0 bg-black/45"></div>
    <div class="absolute inset-x-0 bottom-4 px-4">
      <div class="max-w-7xl mx-auto text-white">
        <!-- Breadcrumbs -->
        <nav aria-label="Breadcrumb" class="breadcrumbs mb-1">
          <a href="{{ '/' | relative_url }}">Home</a>
          <span class="sep">›</span>
          <span>Archives</span>
          <span class="sep">›</span>
          <span aria-current="page" class="font-semibold">Gallery</span>
        </nav>
        <!-- Title -->
        <h1 class="text-2xl md:text-3xl font-extrabold">Lab Gallery</h1>
        <p class="text-sm md:text-[15px] opacity-95">Photos from projects, events, and lab life.</p>
      </div>
    </div>
  </div>
</section>

<!-- ===== Toolbar ===== -->
<section class="max-w-7xl mx-auto px-4">
  <div class="g-toolbar">
    <div class="row">
      <div class="g-search">
        <input id="gq" type="text" placeholder="Search by title or tags…" aria-label="Search gallery">
      </div>
      <div class="g-count">
        <span id="gshown">0</span>/<span id="gtotal">0</span> entries
        <span id="gstatus" style="display:none;">(filtered)</span>
      </div>
    </div>
  </div>
</section>

<!-- ===== Gallery Grid ===== -->
<section class="max-w-7xl mx-auto px-4">
  <div class="g-grid" id="ggrid">
    {%- comment -%}
    /gallery/ 경로(페이지/포스트)에서 date가 있는 항목만 수집 (최신순)
    front matter 예시:
    ---
    layout: default
    title: "프로젝트 킥오프 미팅"
    date: 2025-08-13
    permalink: /gallery/2025-08-13-kickoff.html
    image: /assets/gallery/kickoff.jpg     # 카드 대표 이미지(필수 권장)
    tags: [project, kickoff, nexen]        # 검색용(선택)
    ---
    {%- endcomment -%}
    {%- assign all_items = site.pages | concat: site.posts -%}
    {%- assign gallery = "" | split: "" -%}
    {%- for item in all_items -%}
      {%- if item.url and item.url contains '/gallery/' and item.date -%}
        {%- assign gallery = gallery | push: item -%}
      {%- endif -%}
    {%- endfor -%}
    {%- assign gallery = gallery | sort: 'date' | reverse -%}

    {%- if gallery.size == 0 -%}
      <div class="g-empty">갤러리 항목이 없습니다.</div>
    {%- else -%}
      {%- for post in gallery -%}
        {%- assign ymd = post.date | date: "%Y.%m.%d" -%}
        {%- assign thumb = post.thumb | default: post.image | default: '/assets/img/placeholders/gallery.jpg' -%}
        {%- assign tags_text = post.tags | join: ' ' -%}
        <article
          class="g-card"
          data-title="{{ post.title | downcase }}"
          data-tags="{{ tags_text | downcase }}"
          data-date="{{ post.date | date: '%s' }}">
          <a class="g-link" href="{{ post.url | relative_url }}" aria-label="{{ post.title }}"></a>
          <div class="g-cover" style="background-image:url('{{ thumb | relative_url }}')"></div>
          <div class="g-grad"></div>
          <div class="g-meta">
            <h3 class="g-title line-2">{{ post.title }}</h3>
            <div class="g-date">{{ ymd }}</div>
          </div>
        </article>
      {%- endfor -%}
    {%- endif -%}
  </div>

  <!-- Load more -->
  <div class="g-more-wrap" id="gmoreWrap" style="display:none;">
    <button id="gmore" class="g-more">Load more</button>
  </div>
</section>

<!-- ===== Page-only JS ===== -->
<script>
(function(){
  const grid   = document.getElementById('ggrid');
  if(!grid) return;

  const cards  = Array.from(grid.querySelectorAll('.g-card'));
  const qInput = document.getElementById('gq');
  const shown  = document.getElementById('gshown');
  const total  = document.getElementById('gtotal');
  const status = document.getElementById('gstatus');
  const moreWrap = document.getElementById('gmoreWrap');
  const moreBtn  = document.getElementById('gmore');

  // 초기값
  const PAGE = 12;      // 첫 로드 개수
  const STEP = 12;      // 추가 로드 개수
  let limit  = PAGE;
  let query  = '';

  total.textContent = cards.length;

  function match(card){
    if(!query) return true;
    const t = (card.dataset.title + ' ' + (card.dataset.tags || '')).toLowerCase();
    return t.includes(query.toLowerCase());
  }

  function render(){
    let vis = 0, matched = 0;
    cards.forEach(card => {
      const ok = match(card);
      card.style.display = 'none';
      if(ok){
        matched++;
        if(vis < limit){
          card.style.display = '';
          vis++;
        }
      }
    });

    shown.textContent = vis;
    status.style.display = query ? '' : 'none';
    // Load more 표시
    if(matched > limit){
      moreWrap.style.display = '';
    }else{
      moreWrap.style.display = 'none';
    }
  }

  if(qInput){
    qInput.addEventListener('input', () => {
      query = qInput.value.trim();
      limit = PAGE;     // 검색할 때는 처음부터
      render();
    });
  }
  if(moreBtn){
    moreBtn.addEventListener('click', () => {
      limit += STEP;
      render();
    });
  }

  render();
})();
</script>
