<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Lectures | FINDS Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="FINDS Lab — Lectures with institution/semester filters and evaluation scores." />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&family=Noto+Sans:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    :root{ --warm-start:#ac0e0e; /* rgb(172,14,14) */ --warm-end:#d6b14d; /* rgb(214,177,77) */ }
    body{font-family:"Noto Sans KR","Noto Sans","Roboto",system-ui,-apple-system,"Segoe UI",Arial,sans-serif;letter-spacing:.01em}
    .sticky-blur{position:sticky;top:0;z-index:50;backdrop-filter:saturate(180%) blur(6px);-webkit-backdrop-filter:saturate(180%) blur(6px)}
    .card-hover{transition:transform .2s ease, box-shadow .2s ease}
    .card-hover:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.08)}
    *{scrollbar-width:thin;scrollbar-color:#d6b14d #f1f5f9}
    *::-webkit-scrollbar{height:8px;width:8px}
    *::-webkit-scrollbar-thumb{background:#d6b14d;border-radius:9999px}
    *::-webkit-scrollbar-track{background:#f1f5f9}
  </style>
</head>
<body class="bg-gradient-to-b from-white to-slate-50 min-h-screen">
  <div id="root"></div>

  <script type="text/babel">
    const {useMemo,useState} = React;

    const WARM_START = getComputedStyle(document.documentElement).getPropertyValue('--warm-start') || '#ac0e0e';
    const WARM_END   = getComputedStyle(document.documentElement).getPropertyValue('--warm-end')   || '#d6b14d';
    const warmScale  = d3.interpolateLab(WARM_START, WARM_END);
    const pickWarm = (key)=>{ let h=0; const s=String(key||''); for(let i=0;i<s.length;i++) h=(h*31+s.charCodeAt(i))>>>0; return warmScale((h%17)/16); }
    const readable = (bg)=>{ const c=d3.color(bg)||{r:255,g:255,b:255}; const L=(0.2126*c.r+0.7152*c.g+0.0722*c.b)/255; return L<0.55?'#fff':'#111827'; }

    const Tag=({text,colorKey})=>{ const bg=pickWarm(colorKey??text), fg=readable(bg); return <span className="px-2 py-0.5 text-[12px] font-semibold rounded-full inline-flex items-center" style={{backgroundColor:bg,color:fg,boxShadow:'inset 0 0 0 1px rgba(0,0,0,.06)'}}>{text}</span> }
    const FilterChip=({text,selected,onClick})=>{ const base=pickWarm(text); const bg=selected?base:d3.interpolateLab(base,'#ffffff')(0.75); const fg=readable(bg); const border=d3.interpolateLab(base,'#000')(0.18); return <button onClick={onClick} className="px-3 py-1 text-xs font-semibold rounded-full border transition-colors" style={{backgroundColor:bg,color:fg,borderColor:border}}>{text}</button> }

    const Section = ({title, subtitle, children}) => (
      <section className="max-w-6xl mx-auto px-4">
        <div className="mb-4">
          <h2 className="text-2xl font-bold text-slate-800">{title}</h2>
          {subtitle && <p className="text-sm text-slate-600 mt-1">{subtitle}</p>}
        </div>
        {children}
      </section>
    );

    // ====== Data ======
    const lectures=[
      { institution:"Pusan National University", code:"BAI401", title:"AI for Financial Time Series", semester:"2025-Fall", score:4.8 },
      { institution:"University of Oxford",       code:"QF702", title:"Quantitative Finance Seminar",   semester:"2025-Spring", score:4.6 },
      { institution:"UNIST",                      code:"DS201", title:"Machine Learning",               semester:"2023-Fall", score:4.5 },
      { institution:"UNIST",                      code:"DS305", title:"Optimization for Data Science",   semester:"2022-Fall", score:4.7 },
    ];

    const fmtScore=(s)=> `${s.toFixed(1)} / 5.0`;

    const Card=({c})=> (
      <div className="p-5 bg-white rounded-xl border border-slate-200 card-hover">
        <div className="flex flex-wrap items-center gap-2">
          <Tag text={c.institution} />
          <Tag text={c.semester} />
          <Tag text={c.code} colorKey={c.code} />
        </div>
        <p className="mt-2 text-lg font-semibold text-slate-900">{c.title}</p>
        <p className="mt-2 text-sm text-slate-700"><span className="font-bold">Evaluation</span>: {fmtScore(c.score)}</p>
      </div>
    );

    const LecturesPage=()=>{
      const [instSel,setInstSel]=useState(new Set());
      const [semSel,setSemSel]=useState(new Set());
      const allInst=useMemo(()=>[...new Set(lectures.map(l=>l.institution))].sort(),[]);
      const allSem =useMemo(()=>[...new Set(lectures.map(l=>l.semester))].sort().reverse(),[]);
      const toggle=(setter,v)=> setter(prev=>{ const n=new Set(prev); n.has(v)?n.delete(v):n.add(v); return n; });
      const reset=()=>{ setInstSel(new Set()); setSemSel(new Set()); };
      const filtered=useMemo(()=> lectures.filter(l=>{
        if(instSel.size>0 && !instSel.has(l.institution)) return false;
        if(semSel.size>0  && !semSel.has(l.semester)) return false;
        return true;
      }),[instSel,semSel]);

      return (
        <div className="min-h-screen">
          {/* Header */}
          <div className="sticky-blur bg-white/80 border-b border-slate-200">
            <header className="max-w-6xl mx-auto px-4 py-5 flex items-center justify-between">
              <div>
                <h1 className="text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-800">Lectures</h1>
                <p className="text-sm text-slate-600">Institution & Semester filters. Scores are out of 5.0</p>
              </div>
              <a href="./index.html" className="text-sm font-semibold underline decoration-2 underline-offset-4" style={{color:pickWarm('back')}}>Home</a>
            </header>
            <div className="max-w-6xl mx-auto px-4 pb-3">
              <div className="flex items-center gap-3 bg-slate-100/70 p-1 rounded-lg border border-slate-200">
                <div className="text-[12px] font-bold text-slate-600 pl-2">Results</div>
                <div className="text-2xl font-extrabold" style={{color:pickWarm('count')}}>{filtered.length}</div>
                <button onClick={reset} className="ml-auto px-3 py-2 text-xs sm:text-sm font-semibold rounded-md border border-slate-200 bg-white hover:bg-slate-50" style={{color:pickWarm('reset')}}>Reset</button>
              </div>
            </div>
          </div>

          {/* Filters */}
          <div className="sticky-blur bg-white/70 border-b border-slate-200">
            <div className="max-w-6xl mx-auto px-4 py-3 space-y-3">
              <div className="flex flex-wrap items-center gap-2">
                <span className="text-xs font-bold text-slate-600">Filter by Institution</span>
                {allInst.map(s=> <FilterChip key={s} text={s} selected={instSel.has(s)} onClick={()=>toggle(setInstSel,s)} />)}
              </div>
              <div className="flex flex-wrap items-center gap-2">
                <span className="text-xs font-bold text-slate-600">Filter by Semester</span>
                {allSem.map(t=> <FilterChip key={t} text={t} selected={semSel.has(t)} onClick={()=>toggle(setSemSel,t)} />)}
              </div>
            </div>
          </div>

          {/* Content */}
          <main className="py-6">
            <Section title="Courses & Evaluations" subtitle="과목 코드와 강의평 점수(5.0 만점)를 함께 제공합니다.">
              <div className="grid gap-4 sm:grid-cols-2">{filtered.map((c,i)=> <Card key={i} c={c}/>)}</div>
            </Section>
          </main>

          <footer className="max-w-6xl mx-auto px-4 py-10 text-center text-xs text-slate-500">© {new Date().getFullYear()} FINDS Lab. Lectures</footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<LecturesPage/>);
  </script>
</body>
</html>
