---
layout: default
title: location
permalink: /about-location.html
---

<!-- ===== Page Title / Banner ===== -->
<section class="max-w-7xl mx-auto px-4 mt-6">
  <div class="relative rounded-2xl overflow-hidden ring-1 ring-slate-200">
    <img src="{{ '/assets/img/banners/location-hero.jpg' | relative_url }}" alt="Location banner"
         class="w-full h-[200px] md:h-[260px] object-cover" width="1600" height="320" loading="eager" fetchpriority="high">
    <div class="absolute inset-0 bg-black/45"></div>
    <div class="absolute inset-x-0 bottom-4 px-4">
      <div class="max-w-7xl mx-auto text-white">
        <!-- Breadcrumbs -->
        <nav aria-label="Breadcrumb" class="breadcrumbs mb-1 flex gap-2 text-xs">
          <a href="{{ '/' | relative_url }}">Home</a>
          <span>›</span>
          <a href="{{ '/about-introduction.html' | relative_url }}">About FINDS</a>
          <span>›</span>
          <span aria-current="page" class="font-semibold">Location</span>
        </nav>

        <!-- Title -->
        <h1 class="text-2xl md:text-3xl font-extrabold">Location</h1>
      </div>
    </div>
  </div>
</section>

<!-- ===== Map + Info ===== -->
<main class="max-w-7xl mx-auto px-4 mt-6 grid lg:grid-cols-3 gap-6">
  <!-- Map -->
  <div class="lg:col-span-2 card" id="kakao-map-wrap">
    <style>
      /* Page-local styles: map & cards reuse site tokens */
      #kakao-map{width:100%;height:380px;border-radius:12px;border:1px solid #e5e7eb}
      @media (min-width:768px){#kakao-map{height:460px}}
      .map-error{margin-top:10px;padding:10px;border-radius:8px;background:#fef2f2;color:#991b1b;font-weight:700;border:1px solid #fecaca}
      .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;box-shadow:0 1px 2px rgba(0,0,0,.03)}
      .info-row{display:flex;gap:12px}
      .copy-btn{display:inline-flex;align-items:center;gap:6px;height:34px;padding:0 12px;border-radius:10px;border:1px solid #e5e7eb;background:#fff;font-weight:800;font-size:13px}
      .copy-btn:hover{background:#f8fafc}
      .breadcrumbs a{text-decoration:underline;text-underline-offset:2px}
    </style>

    <div id="kakao-map" role="img" aria-label="동덕여자대학교 숭인관 위치 지도"></div>
    <div id="mapError" class="map-error" style="display:none;"></div>

    <!-- 하단 툴바: 저작권 문구는 제거, 기본 워터마크만 유지 -->
    <div class="mt-3 flex items-center justify-end gap-2">
      <button id="btnRecenter" class="copy-btn" title="지도 다시 맞추기">Re-center</button>
      <a id="btnDirections" href="#" target="_blank" rel="noopener noreferrer" class="copy-btn" title="카카오맵 길찾기">Directions</a>
    </div>
  </div>

  <!-- Right column: two stacked cards -->
  <aside class="space-y-6">
    <!-- FINDS Lab -->
    <section class="card">
      <div class="bg-[var(--accent)] text-white text-center font-extrabold rounded-t-lg -m-4 -mb-2 py-3">
        금융데이터사이언스 연구실 <span class="opacity-90">(FINDS Lab.)</span>
      </div>
      <h3 class="mt-4 text-lg font-extrabold text-slate-900">동덕여자대학교 숭인관 702호</h3>
      <div class="mt-4 space-y-3">
        <div class="info-row">
          <img src="{{ '/assets/icons/marker.png' | relative_url }}" alt="" width="18" height="18" loading="lazy">
          <div>
            <div class="text-[12px] text-slate-600">
              (02748) Room 702, Soongin Hall, Dongduk Women’s University<br>
              60 Hwarang-ro 13-gil (23-1 Hawolgok-dong), Seongbuk-gu, Seoul, Republic of Korea
            </div>
            <div class="mt-1">
              <button class="copy-btn" data-copy-addr title="주소 복사">Copy address</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Professor’s Office -->
    <section class="card">
      <div class="bg-[var(--accent2)] text-white text-center font-extrabold rounded-t-lg -m-4 -mb-2 py-3">
        최인수 교수 연구실 <span class="opacity-90">(Prf. Insu Choi's Office)</span>
      </div>
      <h3 class="mt-4 text-lg font-extrabold text-slate-900">동덕여자대학교 숭인관 702호</h3>
      <div class="mt-4 space-y-3">
        <div class="info-row">
          <img src="{{ '/assets/icons/marker.png' | relative_url }}" alt="" width="18" height="18" loading="lazy">
          <div>
            <div class="text-[15px] font-semibold text-slate-900">
              (02748) 서울특별시 성북구 화랑로13길 60 (하월곡동 23-1) 동덕여자대학교 숭인관 702호
            </div>
            <div class="text-[12px] text-slate-600">
              (02748) Room 702, Soongin Hall, Dongduk Women’s University<br>
              60 Hwarang-ro 13-gil (23-1 Hawolgok-dong), Seongbuk-gu, Seoul, Republic of Korea
            </div>
            <div class="mt-1">
              <button class="copy-btn" data-copy-addr title="주소 복사">Copy address</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </aside>
</main>

<!-- ===== Page-specific Scripts ===== -->
<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=2288f6c721287408c4bdc22f994230ad&libraries=services&autoload=false"></script>
<script>
  (function(){
    // ----- Constants -----
    const PLACE_NAME   = '동덕여자대학교 숭인관';
    const ADDRESS_TEXT = '(02748) 서울특별시 성북구 화랑로13길 60 동덕여자대학교 숭인관';
    // 검색 실패 시 사용할 근사 좌표(필요시 조정)
    const FALLBACK = { lat: 37.6067, lng: 127.0505 };

    const elMap = document.getElementById('kakao-map');
    const elErr = document.getElementById('mapError');
    const elBtnRecenter = document.getElementById('btnRecenter');
    const elBtnDirections = document.getElementById('btnDirections');

    /** Kakao objs */
    let map = null;
    let marker = null;
    let infoWindow = null;
    let finalCenter = null; // 검색 성공/실패 후 확정된 중심점만 저장

    function showError(msg){
      elErr.style.display = 'block';
      elErr.textContent = msg;
    }

    function setDirectionsLink(lat, lng, name){
      const url = `https://map.kakao.com/link/to/${encodeURIComponent(name)},${lat},${lng}`;
      elBtnDirections.setAttribute('href', url);
    }

    function createOrMoveMarker(latLng) {
      if (!marker) {
        marker = new kakao.maps.Marker({ position: latLng });
        marker.setMap(map);
      } else {
        marker.setPosition(latLng);
      }
    }

    function openInfo(latLng, name) {
      const html = `
        <div style="padding:8px 10px;font-weight:700;font-size:13px;">
          ${name}<br>
          <span style="font-weight:500;color:#4b5563;">FINDS Lab. · DWU</span>
        </div>`;
      if (!infoWindow) {
        infoWindow = new kakao.maps.InfoWindow({ content: html, removable: false });
      } else {
        infoWindow.setContent(html);
      }
      infoWindow.open(map, marker);
    }

    function wireButtons(){
      elBtnRecenter.addEventListener('click', function(){
        if(map && finalCenter){
          map.setCenter(finalCenter);
          map.setLevel(3);
        }
      });

      document.querySelectorAll('[data-copy-addr]').forEach(btn=>{
        btn.addEventListener('click', async ()=>{
          try{
            await navigator.clipboard.writeText(ADDRESS_TEXT);
            btn.textContent = 'Copied!';
            setTimeout(()=>{ btn.textContent = 'Copy address'; }, 1200);
          }catch(err){
            alert('복사에 실패했습니다. 잠시 후 다시 시도해주세요.');
          }
        });
      });
    }

    function locateByKeyword(){
      const places = new kakao.maps.services.Places();
      places.keywordSearch(PLACE_NAME, function(data, status){
        if(status === kakao.maps.services.Status.OK && data && data.length){
          const exact = data.find(d => (d.place_name||'').includes('숭인관')) || data[0];
          const lat = parseFloat(exact.y), lng = parseFloat(exact.x);
          finalCenter = new kakao.maps.LatLng(lat, lng);
          map.setCenter(finalCenter);
          map.setLevel(3);
          createOrMoveMarker(finalCenter);
          openInfo(finalCenter, exact.place_name || PLACE_NAME);
          setDirectionsLink(lat, lng, exact.place_name || PLACE_NAME);
        }else{
          // 검색 실패 시: Fallback에 "단일" 마커 생성
          finalCenter = new kakao.maps.LatLng(FALLBACK.lat, FALLBACK.lng);
          map.setCenter(finalCenter);
          createOrMoveMarker(finalCenter);
          openInfo(finalCenter, PLACE_NAME);
          setDirectionsLink(FALLBACK.lat, FALLBACK.lng, PLACE_NAME);
          showError('지오코딩 결과를 찾지 못해 근사 위치로 표시했습니다.');
        }
      }, { size: 5 });
    }

    function bootstrap(){
      try{
        kakao.maps.load(function(){
          const initCenter = new kakao.maps.LatLng(FALLBACK.lat, FALLBACK.lng);
          map = new kakao.maps.Map(elMap, { center: initCenter, level: 3 });

          // 저작권 워터마크 위치 조정(표시는 유지) — Kakao 로고/저작권은 가리지 마세요
          if (kakao.maps.CopyrightPosition) {
            map.setCopyrightPosition(kakao.maps.CopyrightPosition.BOTTOMRIGHT, true);
          }

          // 마커는 지금 만들지 않고, 검색 성공/실패 후 "한 번만" 생성
          locateByKeyword();
          wireButtons();
        });
      }catch(e){
        showError('지도를 불러오는 중 오류가 발생했습니다. 네트워크 상태를 확인해주세요.');
      }
    }

    // autoload=false 이므로 명시적으로 부팅
    if (window.kakao && kakao.maps) {
      bootstrap();
    } else {
      window.addEventListener('load', ()=>{
        if(window.kakao && kakao.maps){ bootstrap(); }
        else showError('카카오 지도 SDK 로딩에 실패했습니다.');
      });
    }
  })();
</script>


