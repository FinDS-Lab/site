<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Location | FINDS Lab — Dongduk Woman University</title>
  <meta name="description" content="FINDS Lab Location — Dongduk Woman University College of Business" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700;900&family=Noto+Sans:wght@400;600;700;900&family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Kakao Maps SDK (services 포함) -->
  <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2288f6c721287408c4bdc22f994230ad&libraries=services"></script>

  <style>
    :root{
      --accent: rgb(172, 14, 14);   /* red */
      --gold:   rgb(214, 177, 77);  /* gold */
      --fg-on-accent:#ffffff;
      --bg:#ffffff;
      --bg-soft:#f8fafc;
      --ring:0 0 0 3px rgba(172,14,14,.25);
    }
    html,body{font-family:"Noto Sans KR","Noto Sans","Roboto",system-ui,-apple-system,"Segoe UI",Arial,sans-serif;}
    .sticky-blur{position:sticky;top:0;z-index:50;backdrop-filter:saturate(180%) blur(8px);background:rgba(255,255,255,.85)}
    .nav-link{font-weight:800}
    .nav-link:hover{color:var(--accent)}
    .submenu-panel{font-size:13px; line-height:1.25rem; width:13.5rem}
    .submenu-item{padding:.35rem .75rem; font-weight:700}
    .btn-primary{background:var(--accent);color:var(--fg-on-accent);border-radius:.75rem;padding:.6rem 1rem;font-weight:900;box-shadow:0 6px 20px rgba(0,0,0,.12);transition:transform .18s ease, opacity .18s ease}
    .btn-primary:hover{transform:translateY(-1px);opacity:.95}
    .tag-gold{background:var(--gold);color:#111827;border-radius:9999px;padding:.22rem .55rem;font-size:.72rem;font-weight:900}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:1rem;padding:1.1rem}
    :focus-visible{outline:none;box-shadow:var(--ring)}
    *{scrollbar-width:thin;scrollbar-color:var(--accent) #f1f5f9}
    *::-webkit-scrollbar{height:8px;width:8px}
    *::-webkit-scrollbar-thumb{background:var(--accent);border-radius:9999px}

    /* Desktop submenu show/hide (robust hover) */
    .menu-group .js-submenu{visibility:hidden;opacity:0;transform:translateY(6px);transition:visibility .18s ease, opacity .18s ease, transform .18s ease}
    .menu-group.open .js-submenu{visibility:visible;opacity:1;transform:translateY(0)}

    /* Map responsive box */
    #kakao-map{width:100%; height:460px; border-radius:1rem; overflow:hidden; border:1px solid #e5e7eb;}
    @media (max-width: 640px){
      #kakao-map{height:360px;}
    }

    .info-row{display:flex; align-items:flex-start; gap:.6rem}
    .info-row img{width:18px; height:18px; margin-top:.15rem}
    .copy-btn{display:inline-flex; align-items:center; gap:.35rem; padding:.25rem .55rem; border-radius:.6rem; border:1px solid #e5e7eb; font-weight:700; font-size:.75rem}
    .copy-btn:hover{background:#f8fafc}
  </style>
</head>
<body class="bg-[var(--bg-soft)]">
  <!-- Header -->
  <div class="sticky-blur border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between gap-4">
      <a href="./" class="flex items-center gap-3">
        <img src="assets/img/brand/logo-finds.png" alt="FINDS Lab Logo" class="h-9 w-9 rounded-lg ring-1 ring-slate-200 object-contain bg-white" />
        <div class="leading-tight">
          <div class="text-sm font-extrabold tracking-tight" style="color:var(--accent)">Financial Data Science Lab.</div>
          <div class="text-[12px] font-semibold text-slate-600">Dongduk Woman University</div>
        </div>
      </a>

      <nav class="hidden md:flex items-center gap-6">
        <a class="nav-link" href="./"><b>Home</b></a>

        <!-- About FINDS -->
        <div class="relative menu-group" data-menu>
          <a class="nav-link" href="about-introduction.html"><b>About FINDS</b></a>
          <div class="absolute top-full left-0 bg-white border border-slate-200 rounded-xl mt-1 py-2 submenu-panel shadow-xl js-submenu">
            <a class="block submenu-item hover:bg-slate-50" href="about-introduction.html">Introduction</a>
            <a class="block submenu-item hover:bg-slate-50" href="about-vision-area.html">Research Area</a>
            <a class="block submenu-item hover:bg-slate-50" href="about-notice.html">Notice</a>
            <a class="block submenu-item hover:bg-slate-50" href="about-awards.html">Awards</a>
            <a class="block submenu-item hover:bg-slate-50" href="about-location.html">Location</a>
          </div>
        </div>

        <!-- Members -->
        <div class="relative menu-group" data-menu>
          <a class="nav-link" href="members-director.html"><b>Members</b></a>
          <div class="absolute top-full left-0 bg-white border border-slate-200 rounded-xl mt-1 py-2 submenu-panel shadow-xl js-submenu">
            <a class="block submenu-item hover:bg-slate-50" href="members-director.html">Director</a>
            <a class="block submenu-item hover:bg-slate-50" href="members-current.html">Current Students</a>
            <a class="block submenu-item hover:bg-slate-50" href="members-alumni.html">Alumni</a>
            <a class="block submenu-item hover:bg-slate-50" href="members-mentorship.html">Mentorship</a>
          </div>
        </div>

        <!-- Publications / Lectures / Projects -->
        <a class="nav-link" href="publications-all.html"><b>Publications</b></a>
        <a class="nav-link" href="lectures.html"><b>Lectures</b></a>
        <a class="nav-link" href="projects.html"><b>Projects</b></a>

        <!-- Archives -->
        <div class="relative menu-group" data-menu>
          <a class="nav-link" href="archives-news.html"><b>Archives</b></a>
          <div class="absolute top-full left-0 bg-white border border-slate-200 rounded-xl mt-1 py-2 submenu-panel shadow-xl js-submenu">
            <a class="block submenu-item hover:bg-slate-50" href="archives-news.html">News</a>
            <a class="block submenu-item hover:bg-slate-50" href="archives-seminar.html">Seminar</a>
            <a class="block submenu-item hover:bg-slate-50" href="archives-gallery.html">Gallery</a>
          </div>
        </div>
      </nav>

      <!-- Mobile toggle -->
      <div class="flex items-center gap-2">
        <button id="btnMobile" class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-lg border border-slate-200 bg-white" aria-label="Open menu">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
        </button>
      </div>
    </div>

    <!-- Mobile Nav -->
    <div id="mobileNav" class="md:hidden max-w-7xl mx-auto px-4 pb-3 hidden">
      <div class="grid gap-2 bg-white border border-slate-200 rounded-xl p-3 max-h-[70vh] overflow-y-auto">
        <a class="px-3 py-2 rounded-md hover:bg-slate-50 font-extrabold" href="./">Home</a>

        <div class="px-3 py-2">
          <a class="block font-extrabold mb-1" href="about-introduction.html">About FINDS</a>
          <div class="pl-3 grid text-[14px]">
            <a class="py-1 hover:underline font-bold" href="about-introduction.html">Introduction</a>
            <a class="py-1 hover:underline font-bold" href="about-vision-area.html">Research Area</a>
            <a class="py-1 hover:underline font-bold" href="about-notice.html">Notice</a>
            <a class="py-1 hover:underline font-bold" href="about-awards.html">Awards</a>
            <a class="py-1 hover:underline font-bold" href="about-location.html">Location</a>
          </div>
        </div>

        <div class="px-3 py-2">
          <a class="block font-extrabold mb-1" href="members-director.html">Members</a>
          <div class="pl-3 grid text-[14px]">
            <a class="py-1 hover:underline font-bold" href="members-director.html">Director</a>
            <a class="py-1 hover:underline font-bold" href="members-current.html">Current Students</a>
            <a class="py-1 hover:underline font-bold" href="members-alumni.html">Alumni</a>
            <a class="py-1 hover:underline font-bold" href="members-mentorship.html">Mentorship</a>
          </div>
        </div>

        <a class="px-3 py-2 rounded-md hover:bg-slate-50 font-extrabold" href="publications-all.html">Publications</a>
        <a class="px-3 py-2 rounded-md hover:bg-slate-50 font-extrabold" href="lectures.html">Lectures</a>
        <a class="px-3 py-2 rounded-md hover:bg-slate-50 font-extrabold" href="projects.html">Projects</a>

        <div class="px-3 py-2">
          <a class="block font-extrabold mb-1" href="archives-news.html">Archives</a>
          <div class="pl-3 grid text:[14px]">
            <a class="py-1 hover:underline font-bold" href="archives-news.html">News</a>
            <a class="py-1 hover:underline font-bold" href="archives-seminar.html">Seminar</a>
            <a class="py-1 hover:underline font-bold" href="archives-gallery.html">Gallery</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Page Title -->
  <section class="max-w-7xl mx-auto px-4 mt-6">
    <div class="rounded-xl border border-slate-200 bg-white p-4 flex items-center justify-between">
      <div>
        <span class="tag-gold">About FINDS</span>
        <h1 class="mt-2 text-2xl md:text-3xl font-extrabold tracking-tight text-slate-900">Location</h1>
        <p class="text-sm text-slate-600 mt-1">Dongduk Woman University · College of Business (경영대학)</p>
      </div>
      <div class="hidden sm:block text-right">
        <a href="mailto:yoontaeResearch@gmail.com" class="text-sm font-bold underline underline-offset-4" style="color:var(--accent)">Contact</a>
      </div>
    </div>
  </section>

  <!-- Map + Info -->
  <main class="max-w-7xl mx-auto px-4 mt-6 grid lg:grid-cols-3 gap-6">
    <!-- Map -->
    <div class="lg:col-span-2 card">
      <div id="kakao-map" role="img" aria-label="동덕여자대학교 경영대학 위치 지도"></div>
      <div class="mt-3 flex items-center justify-between">
        <div class="text-[12px] text-slate-500">Powered by Kakao Maps</div>
        <div class="flex items-center gap-2">
          <button id="btnRecenter" class="copy-btn" title="지도 다시 맞추기">Re-center</button>
          <a id="btnDirections" href="#" target="_blank" rel="noopener noreferrer" class="copy-btn" title="카카오맵 길찾기">Directions</a>
        </div>
      </div>
    </div>

    <!-- Info -->
    <aside class="card">
      <h3 class="text-lg font-extrabold text-slate-900">FINDS Lab @ Dongduk Woman University</h3>
      <p class="text-sm text-slate-600 mt-1">College of Business · Management (경영대학 · 경영학과)</p>

      <div class="mt-4 space-y-3">
        <div class="info-row">
          <img src="assets/icons/marker.png" alt="" />
          <div>
            <div id="addr-ko" class="text-[15px] font-semibold text-slate-900">주소 검색 중…</div>
            <div id="addr-en" class="text-[12px] text-slate-600">Loading address…</div>
            <div class="mt-1">
              <button id="btnCopyAddr" class="copy-btn" title="주소 복사">Copy address</button>
            </div>
          </div>
        </div>

        <div class="info-row">
          <img src="assets/icons/phone.png" alt="" />
          <div class="text-sm">
            <span class="font-semibold text-slate-800">Tel.</span>
            <a id="tel-link" href="#" class="underline underline-offset-2 font-bold ml-2">—</a>
          </div>
        </div>

        <div class="info-row">
          <img src="assets/icons/mail.png" alt="" />
          <div class="text-sm">
            <span class="font-semibold text-slate-800">E-mail</span>
            <a href="mailto:yoontaeResearch@gmail.com" class="underline underline-offset-2 font-bold ml-2">yoontaeResearch@gmail.com</a>
          </div>
        </div>
      </div>

      <div class="mt-5 p-3 rounded-lg bg-slate-50 border border-slate-200">
        <div class="text-[12px] text-slate-600">
          * 지점명이 정확히 ‘경영대학’으로 등록되지 않은 경우, 캠퍼스 중심 좌표로 안내될 수 있습니다. 상세 건물은 지도에서 확대 후 확인하세요.
        </div>
      </div>
    </aside>
  </main>

  <!-- Footer -->
  <footer class="mt-10 border-t border-slate-200 bg-white">
    <div class="max-w-7xl mx-auto px-4 py-8">
      <ul class="flex flex-wrap gap-x-4 gap-y-2 justify-center text-sm font-semibold">
        <li><a class="hover:underline" href="https://www.dongduk.ac.kr/" target="_blank" rel="noopener">동덕여자대학교</a></li>
        <li><a class="hover:underline" href="https://manage.dongduk.ac.kr/" target="_blank" rel="noopener">동덕여자대학교 경영학과</a></li>
        <li><a class="hover:underline" href="https://scholar.google.com/" target="_blank" rel="noopener">Google Scholar</a></li>
        <li><a class="hover:underline" href="https://www.nrf.re.kr/" target="_blank" rel="noopener">한국연구재단</a></li>
      </ul>
      <p class="mt-4 text-center text-xs text-slate-500">
        Copyright © 2025 Financial Data Science Lab. All Rights Reserved.
      </p>
    </div>
  </footer>

  <script>
    // ===== Mobile menu toggle =====
    const btnMobile = document.getElementById('btnMobile');
    const mobileNav = document.getElementById('mobileNav');
    btnMobile?.addEventListener('click', ()=> mobileNav.classList.toggle('hidden'));

    // ===== Desktop submenu keep-open (70ms) =====
    const MENU_DELAY = 70;
    document.querySelectorAll('.menu-group[data-menu]').forEach(grp=>{
      const panel = grp.querySelector('.js-submenu');
      let t;
      const open  = ()=>{ clearTimeout(t); grp.classList.add('open'); };
      const close = ()=>{ t = setTimeout(()=> grp.classList.remove('open'), MENU_DELAY); };
      grp.addEventListener('mouseenter', open);
      grp.addEventListener('mouseleave', close);
      grp.addEventListener('focusin', open);
      grp.addEventListener('focusout', close);
    });

    // ===== Kakao Map Setup =====
    const mapEl = document.getElementById('kakao-map');
    const addrKoEl = document.getElementById('addr-ko');
    const addrEnEl = document.getElementById('addr-en');
    const telLink = document.getElementById('tel-link');
    const btnCopyAddr = document.getElementById('btnCopyAddr');
    const btnDirections = document.getElementById('btnDirections');
    const btnRecenter = document.getElementById('btnRecenter');

    // 지도 기본(서울 중심) — 키워드 검색 후 재설정
    const map = new kakao.maps.Map(mapEl, {
      center: new kakao.maps.LatLng(37.5665, 126.9780),
      level: 5
    });
    const places = new kakao.maps.services.Places();
    const geocoder = new kakao.maps.services.Geocoder();

    // 우선순위 키워드
    const queries = [
      '동덕여자대학교 경영대학',
      '동덕여자대학교 경영학과',
      '동덕여자대학교'
    ];

    let currentPos = null;
    let currentName = '동덕여자대학교';
    let currentAddrKo = '';
    let currentTel = '';

    function setMarkerAndInfo(lat, lng, name, address, tel) {
      const pos = new kakao.maps.LatLng(lat, lng);
      currentPos = pos;
      currentName = name || currentName;
      currentAddrKo = address || '';
      currentTel = tel || '';

      map.setCenter(pos);

      const marker = new kakao.maps.Marker({
        position: pos
      });
      marker.setMap(map);

      const iwContent = `
        <div style="padding:8px 10px; font-size:12px; max-width:220px;">
          <div style="font-weight:800; margin-bottom:4px; color:#111827;">${currentName}</div>
          ${currentAddrKo ? `<div style="color:#374151;">${currentAddrKo}</div>` : ''}
          ${currentTel ? `<div style="color:#6b7280; margin-top:2px;">Tel. ${currentTel}</div>` : ''}
          <div style="margin-top:6px;">
            <a href="https://map.kakao.com/link/to/${encodeURIComponent(currentName)},${lat},${lng}" target="_blank" rel="noopener" style="color:#ac0e0e; font-weight:800; text-decoration:underline; text-underline-offset:2px;">길찾기</a>
          </div>
        </div>
      `;
      const infowindow = new kakao.maps.InfoWindow({
        position: pos,
        content: iwContent
      });
      infowindow.open(map, marker);

      // 패널 텍스트 갱신
      addrKoEl.textContent = currentAddrKo || '주소 정보가 없습니다.';
      addrEnEl.textContent = 'Open in Kakao Map for more details';
      telLink.textContent = currentTel || '—';
      telLink.href = currentTel ? `tel:${currentTel.replace(/[^0-9+]/g,'')}` : '#';

      // 버튼 링크
      btnDirections.href = `https://map.kakao.com/link/to/${encodeURIComponent(currentName)},${lat},${lng}`;
    }

    function searchSequentially(qs, idx = 0) {
      if (idx >= qs.length) {
        // 실패: 캠퍼스 좌표를 geocoding 으로 시도
        geocoder.addressSearch('서울 성북구 화랑로13길 60', (result, status) => {
          if (status === kakao.maps.services.Status.OK && result[0]) {
            const { x, y, address_name } = result[0];
            setMarkerAndInfo(y, x, '동덕여자대학교', address_name, '');
          } else {
            // 최종 fallback: 서울시청
            setMarkerAndInfo(37.5665, 126.9780, '동덕여자대학교(가까운 중심)', '서울특별시', '');
          }
        });
        return;
      }
      places.keywordSearch(qs[idx], (data, status) => {
        if (status === kakao.maps.services.Status.OK && data.length > 0) {
          // 가장 관련 높은 1건 사용
          const p = data[0];
          const lat = p.y, lng = p.x;
          const name = p.place_name || qs[idx];
          const tel = p.phone || '';
          // 도로명/지번 주소 시도
          const addr = p.road_address_name || p.address_name || '';
          setMarkerAndInfo(lat, lng, name, addr, tel);
        } else {
          searchSequentially(qs, idx + 1);
        }
      }, { size: 3 });
    }

    searchSequentially(queries);

    // 주소 복사
    btnCopyAddr.addEventListener('click', async () => {
      const text = currentAddrKo || '';
      if (!text) return;
      try {
        await navigator.clipboard.writeText(text);
        btnCopyAddr.textContent = 'Copied!';
        setTimeout(()=> btnCopyAddr.textContent = 'Copy address', 1200);
      } catch (e) {
        alert('복사 실패: 브라우저 권한을 확인하세요.');
      }
    });

    // 지도 다시 맞추기
    btnRecenter.addEventListener('click', () => {
      if (currentPos) map.setCenter(currentPos);
    });

    // GitHub Pages 도메인 등록 안내 (콘솔 경고만)
    (function checkDomain(){
      const host = location.origin;
      // 개발자 경험 향상용 메시지 (동작엔 영향 없음)
      console.info('[Kakao Maps] Console domain:', host, '— 카카오 디벨로퍼스(플랫폼 > Web) 도메인 등록에 포함되어야 합니다.');
    })();
  </script>
</body>
</html>
